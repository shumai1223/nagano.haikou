<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>é•·é‡ã®å»ƒæ ¡æ®²æ»…è¨ˆç”»ï¼</title>
  <!-- Tailwind CSS CDN -->
  <script>
    // Tailwind dark mode by class
    tailwind.config = { darkMode: 'class' };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Google Fonts - Inter for modern look, Noto Sans JP for Japanese text -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
  <!-- Animate.css CDN (animations) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" integrity="sha512-VeYcmY+cGtnznuaCG2lKT9OAXoJ1i8LojRxur2jcWcN6iYG3PaY5E9O+V1YQUhCEVhVpWwfvX2gYdExUvN1CSA==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <style>
    /* Custom CSS to override/enhance Tailwind and provide global styles */
    html {
      scroll-behavior: smooth; /* ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’æœ‰åŠ¹ã«ã™ã‚‹ */
    }
    body {
      font-family: 'Noto Sans JP', 'Inter', sans-serif;
      background: linear-gradient(to bottom right, #1a1a2e, #16213e, #0f3460); /* æ·±ã„é’ã‹ã‚‰ç´«ã¸ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
      color: #e8eafc; /* æ˜ã‚‹ã„ã‚ªãƒ•ãƒ›ãƒ¯ã‚¤ãƒˆã®æ–‡å­—è‰²ã«æ›´æ–° */
      overflow-x: hidden;
      line-height: 1.8; /* è¡Œé–“ã‚’åºƒã’ã¦èª­ã¿ã‚„ã™ã */
    }
    body.menu-open, body.loading {
        overflow: hidden; /* ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºæ™‚ã‚„ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚ã«èƒŒæ™¯ã‚’ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã›ãªã„ */
    }

    /* === Preloader Styles === */
    #preloader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #1a1a2e;
        z-index: 9999;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: opacity 0.8s ease, visibility 0.8s ease;
    }
    #preloader.loaded {
        opacity: 0;
        visibility: hidden;
    }
    .loader-ring {
        width: 80px;
        height: 80px;
        border: 5px solid rgba(167, 243, 208, 0.2);
        border-top-color: #a7f3d0;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }


    h1, h2, h3, h4 {
      font-family: 'Inter', 'Noto Sans JP', sans-serif;
      color: #a7f3d0; /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ã®è–„ã„ç·‘ */
      font-weight: 700;
    }

    /* Header specific styles */
    header {
      background: linear-gradient(90deg, #0f3460, #16213e); /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
      padding: 80px 20px;
      text-align: center;
      position: relative;
      overflow: hidden;
      border-bottom-left-radius: 50px; /* å·¦ä¸‹ã‚’ä¸¸ã */
      border-bottom-right-radius: 50px; /* å³ä¸‹ã‚’ä¸¸ã */
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }
    header::before {
      content: '';
      position: absolute;
      top: -50px;
      left: -50px;
      width: 200px;
      height: 200px;
      background: rgba(167, 243, 208, 0.1);
      border-radius: 50%;
      filter: blur(50px);
      animation: pulse 8s infinite alternate;
    }
    header::after {
      content: '';
      position: absolute;
      bottom: -50px;
      right: -50px;
      width: 150px;
      height: 150px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 50%;
      filter: blur(40px);
      animation: pulse 10s infinite alternate-reverse;
    }
    header h1 {
      font-size: 4.5em;
      margin-bottom: 10px;
      color: #e8eafc;
      text-shadow: 3px 3px 10px rgba(0,0,0,0.5);
      opacity: 0;
      transform: translateY(-20px);
      animation: slideInTop 1s ease-out forwards;
    }
    header .subtitle {
      font-size: 1.6em;
      color: #bfdbfe;
      font-family: 'Inter', sans-serif;
      font-weight: 400;
      margin-bottom: 15px;
      opacity: 0;
      transform: translateY(20px);
      animation: slideInBottom 1s ease-out 0.3s forwards;
    }
    header p:not(.subtitle) {
      font-size: 1.6em;
      color: #bfdbfe;
      opacity: 0;
      transform: translateY(20px);
      animation: slideInBottom 1s ease-out 0.5s forwards;
    }

    /* Navigation specific styles */
    nav {
      padding: 18px 20px;
      position: sticky;
      top: 0;
      z-index: 1000;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background-color 0.4s ease, box-shadow 0.4s ease;
    }
    nav.scrolled {
      background: rgba(15, 52, 96, 0.95);
      backdrop-filter: blur(5px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      border-bottom: 1px solid rgba(167, 243, 208, 0.2);
    }
    #desktop-nav {
      display: none;
    }
    #desktop-nav a {
      color: #bfdbfe;
      text-decoration: none;
      margin: 0 15px;
      font-weight: 500;
      font-size: 1.1em;
      white-space: nowrap;
      transition: all 0.3s ease;
      padding: 8px 10px;
      border-radius: 8px;
      outline-offset: 4px;
      outline: 2px solid transparent;
      position: relative;
    }
    #desktop-nav a::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -4px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #a7f3d0;
      transition: width 0.4s ease;
    }
    #desktop-nav a:hover, #desktop-nav a.active {
      transform: translateY(-4px) scale(1.05); /* æµ®ãä¸ŠãŒã‚ŠåŠ¹æœã‚’å¼·åŒ– */
      color: #a7f3d0;
      background: rgba(167, 243, 208, 0.1);
      box-shadow: 0 4px 15px rgba(167, 243, 208, 0.3);
      text-shadow: 0 0 12px #a7f3d0;
    }
    #desktop-nav a.active::after {
        width: 70%;
    }
    #desktop-nav a:focus-visible {
      outline: 2px solid #a7f3d0;
      box-shadow: 0 0 0 3px rgba(167, 243, 208, 0.5), 0 0 15px rgba(167, 243, 208, 0.5);
    }

    /* Main content specific styles */
    main {
      max-width: 1100px;
      margin: 40px auto;
      padding: 40px 20px;
      background: rgba(22, 33, 62, 0.85);
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(167, 243, 208, 0.15);
      transition: background 0.5s ease;
    }
    section {
      margin-bottom: 80px;
      padding: 40px;
      border-radius: 15px;
      background: rgba(15, 52, 96, 0.4);
      box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(167, 243, 208, 0.1);
    }
    /* === å°ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ›´æ–° (å¤§å¹…ã«å¤§ãã) === */
    h2 {
      font-size: 6.5em; /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å¤§å¹…ã«å¤§ãã */
      color: #a7f3d0;
      padding-left: 25px;
      margin-bottom: 50px;
      text-shadow: 0 0 15px rgba(167, 243, 208, 0.8), 0 0 40px rgba(167, 243, 208, 0.6); /* ã‚°ãƒ­ãƒ¼åŠ¹æœã‚’ã•ã‚‰ã«å¼·èª¿ */
      position: relative;
    }
    h2::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        width: 8px;
        height: 0;
        background-color: #a7f3d0;
        border-radius: 4px;
        transition: height 0.8s cubic-bezier(0.23, 1, 0.32, 1);
    }
    h2.is-visible::before {
        height: 100%;
    }

    p {
      color: #e8eafc;
      font-size: 1.18em;
      margin-bottom: 15px;
    }
    /* === ç®‡æ¡æ›¸ãã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ›´æ–° (ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ ) === */
    section ul {
      list-style: none;
      padding-left: 0;
    }
    section li {
      margin-bottom: 12px;
      padding-left: 35px;
      position: relative;
      font-size: 1.1em;
      transition: transform 0.3s ease;
    }
    section li:hover {
        transform: translateY(-4px); /* æµ®ãä¸ŠãŒã‚‹åŠ¹æœ */
    }
    section li::before {
        content: 'âœ“';
        position: absolute;
        left: 0;
        top: 0;
        color: #a7f3d0;
        font-weight: bold;
        font-size: 1.2em;
        transition: transform 0.3s ease, color 0.3s ease;
    }
    section li:hover::before {
        transform: scale(1.4) rotate(-15deg);
        color: #ffffff;
    }


    /* Team section (ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ ) */
    .team {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
    }
    .member {
      background: #1a2a4e;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.6);
      padding: 25px;
      transition: all 0.3s ease;
      border: 1px solid rgba(167, 243, 208, 0.15);
      text-align: center;
    }
    .member:hover {
      transform: translateY(-12px); /* æµ®ãä¸ŠãŒã‚‹åŠ¹æœ */
      background: #243c68;
      box-shadow: 0 18px 40px rgba(0,0,0,0.7), 0 0 20px rgba(167, 243, 208, 0.4);
    }
    .member h4 {
      font-size: 1.7em;
      color: #a7f3d0;
      margin-bottom: 10px;
    }
    .member p {
      font-size: 1.05em;
      color: #bfdbfe;
    }

    /* Idea blocks (ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¿½åŠ ) */
    .idea {
      background: rgba(26, 42, 78, 0.8);
      border-left: 6px solid #a7f3d0;
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 25px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.4);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .idea:hover {
      transform: translateY(-8px); /* æµ®ãä¸ŠãŒã‚‹åŠ¹æœ */
      box-shadow: 0 12px 35px rgba(0,0,0,0.6), 0 0 25px rgba(167, 243, 208, 0.5);
    }
    .idea h3 {
      font-size: 1.9em;
      color: #e8eafc;
      margin-bottom: 10px;
    }
    .idea p {
      font-size: 1.15em;
      color: #bfdbfe;
    }

    /* Contact form */
    form {
      background: #1a2a4e;
      padding: 35px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
      border: 1px solid rgba(167, 243, 208, 0.15);
    }
    input[type="text"],
    input[type="email"],
    input[type="password"],
    textarea {
      width: 100%;
      padding: 12px 15px;
      margin-bottom: 20px;
      border: 1px solid #3b5998;
      border-radius: 10px;
      background: #111a2d;
      color: #e8e4fc; /* Changed to a slightly different off-white */
      font-size: 1.05em;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      outline: 2px solid transparent;
      outline-offset: 2px;
    }
    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="password"]:focus,
    textarea:focus {
      outline: none;
      border-color: #a7f3d0;
      box-shadow: 0 0 0 3px rgba(167, 243, 208, 0.3), 0 0 10px rgba(167, 243, 208, 0.5);
    }
    input[type="submit"],
    .btn {
      background: #a7f3d0;
      color: #0f3460;
      border: none;
      padding: 12px 30px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1.1em;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0,0,0,0.4);
      outline: 2px solid transparent;
      outline-offset: 4px;
      position: relative;
      overflow: hidden;
    }
    input[type="submit"]:hover,
    .btn:hover {
      background: #7bdcb5;
      transform: translateY(-3px); /* æµ®ãä¸ŠãŒã‚‹åŠ¹æœ */
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
    }
    input[type="submit"]:focus-visible,
    .btn:focus-visible {
      outline: 2px solid #a7f3d0;
      box-shadow: 0 0 0 3px rgba(167, 243, 208, 0.5);
    }
    input[type="submit"]:active,
    .btn:active {
      transform: translateY(0px) scale(0.98);
      box-shadow: 0 3px 10px rgba(0,0,0,0.3);
    }
    .btn-primary {
        background: #a7f3d0;
        color: #0f3460;
    }
    .btn-primary:hover {
        background: #7bdcb5;
    }
    .btn-secondary {
      background: #3b5998;
      color: #e8eafc;
    }
    .btn-secondary:hover {
      background: #4a6fa5;
    }
    
    /* === Ripple Effect for Buttons === */
    .ripple {
        position: absolute;
        border-radius: 50%;
        transform: scale(0);
        animation: ripple-animation 0.6s linear;
        background-color: rgba(255, 255, 255, 0.7);
    }
    @keyframes ripple-animation {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }


    /* Loading Button Styles */
    .btn-loading {
      cursor: wait !important;
      pointer-events: none;
      color: transparent !important;
      position: relative;
    }

    .btn-loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 24px;
      height: 24px;
      margin-top: -12px;
      margin-left: -12px;
      border: 3px solid #fff;
      border-top-color: #a7f3d0;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    /* Footer */
    footer {
      background: #0f3460;
      color: #bfdbfe;
      text-align: center;
      padding: 25px;
      font-size: 0.95em;
      margin-top: 60px;
      border-top-left-radius: 50px;
      border-top-right-radius: 50px;
      box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.4);
    }

    /* Scroll to top button */
    #scrollToTopBtn {
      display: none;
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 999;
      background-color: #a7f3d0;
      color: #0f3460;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.5em;
      font-weight: bold;
      line-height: 50px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.4);
      cursor: pointer;
      transition: all 0.3s ease;
      opacity: 0;
      visibility: hidden;
      transform: translateY(20px);
      outline: 2px solid transparent;
      outline-offset: 4px;
    }
    #scrollToTopBtn.visible {
        opacity: 0.8;
        visibility: visible;
        transform: translateY(0);
    }
    #scrollToTopBtn:hover {
      background-color: #7bdcb5;
      transform: scale(1.1) translateY(-5px); /* æµ®ãä¸ŠãŒã‚ŠåŠ¹æœ */
      opacity: 1;
    }
    #scrollToTopBtn:focus-visible {
      outline: 2px solid #a7f3d0;
      box-shadow: 0 0 0 3px rgba(167, 243, 208, 0.5);
    }

    /* === Mobile Menu Styles (Updated) === */
    #hamburger-btn {
        position: fixed;
        top: 18px;
        right: 20px;
        z-index: 1002;
        background: none;
        border: none;
        padding: 10px;
        cursor: pointer;
        display: none;
    }
    .hamburger-line {
        display: block;
        width: 30px;
        height: 3px;
        background-color: #e8eafc;
        border-radius: 3px;
        margin: 6px 0;
        transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1), background-color 0.4s ease;
    }
    #hamburger-btn.is-active .hamburger-line:nth-child(1) {
        transform: rotate(45deg) translate(7px, 7px);
    }
    #hamburger-btn.is-active .hamburger-line:nth-child(2) {
        transform: scaleX(0);
    }
    #hamburger-btn.is-active .hamburger-line:nth-child(3) {
        transform: rotate(-45deg) translate(7px, -7px);
    }

    #mobile-menu {
        position: fixed;
        top: 0;
        right: 0;
        width: 100%;
        max-width: 320px;
        height: 100%;
        background: rgba(22, 33, 62, 0.9);
        backdrop-filter: blur(8px);
        z-index: 1001;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        transform: translateX(100%);
        transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    #mobile-menu.is-open {
        transform: translateX(0);
    }
    #mobile-menu a {
        font-size: 1.8em;
        color: #e8eafc;
        text-decoration: none;
        font-weight: 600;
        padding: 18px 0;
        opacity: 0;
        transform: translateX(30px);
        transition: opacity 0.4s ease, transform 0.4s ease, color 0.3s ease;
    }
    #mobile-menu a:hover {
        color: #a7f3d0;
        transform: translateX(5px) translateY(-4px) scale(1.05); /* æµ®ãä¸ŠãŒã‚ŠåŠ¹æœ */
    }
    #mobile-menu.is-open a {
        opacity: 1;
        transform: translateX(0);
    }
    /* Staggered animation delays for mobile menu links */
    #mobile-menu.is-open a:nth-child(1) { transition-delay: 0.20s; }
    #mobile-menu.is-open a:nth-child(2) { transition-delay: 0.25s; }
    #mobile-menu.is-open a:nth-child(3) { transition-delay: 0.30s; }
    #mobile-menu.is-open a:nth-child(4) { transition-delay: 0.35s; }
    #mobile-menu.is-open a:nth-child(5) { transition-delay: 0.40s; }
    #mobile-menu.is-open a:nth-child(6) { transition-delay: 0.45s; }
    #mobile-menu.is-open a:nth-child(7) { transition-delay: 0.50s; }
    #mobile-menu.is-open a:nth-child(8) { transition-delay: 0.55s; }


    /* === Admin Page Styles (Updated) === */
    #admin-section {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start; /* ä¸Šã‹ã‚‰é…ç½® */
      min-height: 80vh;
      padding: 40px;
      background: rgba(10, 20, 40, 0.95);
      border-radius: 20px;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.7);
      border: 1px solid rgba(167, 243, 208, 0.2);
      max-width: 1200px; /* æœ€å¤§å¹…ã‚’æ‹¡å¤§ */
      margin: 40px auto;
    }
    #admin-section h2 {
      font-size: 2.5em;
      margin-bottom: 25px;
      color: #a7f3d0;
      text-align: center;
      border-left: none;
      padding-left: 0;
      text-shadow: 0 0 5px rgba(167, 243, 208, 0.5);
    }
    #admin-section h2::before {
        display: none;
    }
    #admin-password-container {
      margin-top: 20px;
      text-align: center;
      width: 100%;
      max-width: 400px;
    }
    .password-wrapper {
        position: relative;
        display: flex;
        align-items: center;
    }
    .password-wrapper input {
        padding-right: 45px;
    }
    #password-toggle-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        color: #bfdbfe;
        transition: color 0.3s;
    }
    #password-toggle-icon:hover {
        color: #a7f3d0;
    }
    #admin-content {
      display: none;
      width: 100%;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }
    /* Admin Tabs */
    #admin-tabs {
        display: flex;
        border-bottom: 2px solid #3b5998;
        margin-bottom: 20px;
        width: 100%;
        overflow-x: auto; /* ã‚¿ãƒ–ãŒå¤šã„å ´åˆã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ã«ã™ã‚‹ */
        white-space: nowrap;
        -webkit-overflow-scrolling: touch; /* iOSã§ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã« */
    }
    .admin-tab-btn {
        padding: 12px 25px;
        cursor: pointer;
        background: none;
        border: none;
        color: #bfdbfe;
        font-size: 1.1em;
        font-weight: 500;
        transition: all 0.3s ease;
        border-bottom: 3px solid transparent;
        flex-shrink: 0; /* ã‚¿ãƒ–ãŒç¸®ã¾ãªã„ã‚ˆã†ã«ã™ã‚‹ */
    }
    .admin-tab-btn:hover {
        background: rgba(167, 243, 208, 0.1);
        color: #a7f3d0;
    }
    .admin-tab-btn.active {
        color: #a7f3d0;
        border-bottom-color: #a7f3d0;
        font-weight: 700;
    }
    .admin-tab-pane {
        display: none;
        width: 100%;
        animation: fadeIn 0.5s;
    }
    .admin-tab-pane.active {
        display: block;
    }

    .admin-feature-block {
      background: rgba(26, 42, 78, 0.8);
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 30px;
      width: 100%;
      box-shadow: 0 6px 18px rgba(0,0,0,0.4);
      border: 1px solid rgba(167, 243, 208, 0.1);
    }
    .admin-feature-block h3 {
        font-size: 1.5em;
        margin-bottom: 5px;
    }
    .admin-feature-block p.description {
        font-size: 0.9em;
        color: #bfdbfe;
        margin-bottom: 15px;
    }
    .admin-feature-block label {
      font-weight: 600;
      margin-bottom: 10px;
    }
    #admin-textarea {
      width: 100%;
      min-height: 400px;
      background: #0d172a;
      border: 1px solid #3b5998;
      border-radius: 10px;
      padding: 20px;
      color: #e8e4fc; /* Changed to a slightly different off-white */
      font-size: 1.1em;
      resize: vertical;
      margin-bottom: 0;
      outline: 2px solid transparent;
      outline-offset: 2px;
    }
    #admin-textarea:focus {
      border-color: #a7f3d0;
      box-shadow: 0 0 0 3px rgba(167, 243, 208, 0.3);
    }
    #admin-message {
      color: #ef4444;
      margin-top: 10px;
      font-weight: 500;
      text-align: center;
    }
    /* Admin list styles */
    .admin-list {
        list-style: none;
        padding: 0;
        margin: 0;
        max-height: 300px;
        overflow-y: auto;
    }
    .admin-list li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      background-color: rgba(43, 56, 91, 0.7);
      border-radius: 8px;
      margin-bottom: 8px;
      border: 1px solid rgba(167, 243, 208, 0.1);
      transition: background-color 0.3s;
    }
    .admin-list li:hover {
        background-color: rgba(59, 89, 152, 0.7);
    }
    .admin-list li span {
      flex-grow: 1;
      color: #e8e4fc; /* Changed to a slightly different off-white */
    }
    .admin-list li button {
      background: none;
      border: none;
      color: #ef4444;
      font-size: 1.2em;
      cursor: pointer;
      margin-left: 10px;
      transition: color 0.3s, background-color 0.3s, transform 0.2s;
      padding: 5px;
      border-radius: 5px;
      outline: 2px solid transparent;
      outline-offset: 2px;
    }
    .admin-list li button:hover {
      color: #dc2626;
      background-color: rgba(239, 68, 68, 0.1);
      transform: scale(1.1);
    }
    .admin-list li button:focus-visible {
      outline: 2px solid #a7f3d0;
      box-shadow: 0 0 0 3px rgba(167, 243, 208, 0.5);
    }
    .admin-search-input {
        width: 100%;
        padding: 10px 15px;
        margin-bottom: 15px;
        border: 1px solid #3b5998;
        border-radius: 10px;
        background: #111a2d;
        color: #e8e4fc; /* Changed to a slightly different off-white */
        font-size: 1em;
    }
    
    .editable-content-textarea {
        width: 100%;
        min-height: 150px;
        padding: 12px 15px;
        margin-bottom: 15px;
        border: 1px solid #3b5998;
        border-radius: 10px;
        background: #111a2d;
        color: #e8e4fc; /* Changed to a slightly different off-white */
        font-size: 1.05em;
        resize: vertical;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
        outline: 2px solid transparent;
        outline-offset: 2px;
    }
    .editable-content-textarea:focus {
        outline: none;
        border-color: #a7f3d0;
        box-shadow: 0 0 0 3px rgba(167, 243, 208, 0.3);
    }

    /* Custom Modal Styles */
    .modal-overlay {
      position: fixed;
      z-index: 1001;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      visibility: hidden;
      opacity: 0;
      transition: visibility 0.3s, opacity 0.3s;
    }
    .modal-overlay.is-visible {
      visibility: visible;
      opacity: 1;
    }
    .modal-content {
      background-color: #1a2a4e;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.5);
      max-width: 500px;
      width: 90%;
      text-align: center;
      color: #e8e4fc; /* Changed to a slightly different off-white */
      transform: translateY(-20px);
      transition: transform 0.3s ease-out;
    }
    .modal-overlay.is-visible .modal-content {
      transform: translateY(0);
    }
    .modal-content p {
      font-size: 1.1em;
      margin-bottom: 25px;
      line-height: 1.5;
    }
    .modal-btn {
      background-color: #a7f3d0;
      color: #0f3460;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
      outline: none;
      margin: 0 5px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .modal-btn:hover {
      background-color: #7bdcb5;
      transform: translateY(-1px);
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    .modal-btn:focus-visible {
      outline: 2px solid #a7f3d0;
      box-shadow: 0 0 0 3px rgba(167, 243, 208, 0.5);
    }
    .modal-btn-cancel {
      background-color: #ef4444;
      color: white;
    }
    .modal-btn-cancel:hover {
      background-color: #dc2626;
    }
    .modal-actions {
      display: flex;
      justify-content: center;
      gap: 15px;
    }


    /* === Keyframe animations === */
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @keyframes pulse {
        0% { transform: scale(1); opacity: 0.1; }
        50% { transform: scale(1.2); opacity: 0.15; }
        100% { transform: scale(1); opacity: 0.1; }
    }
    @keyframes slideInTop {
      0% { opacity: 0; transform: translateY(-50px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideInBottom {
      0% { opacity: 0; transform: translateY(50px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* === Scroll Animation Styles === */
    .animated-item {
        opacity: 0;
        transform: translateY(40px);
        transition: opacity 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275), transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .animated-item.is-visible {
        opacity: 1;
        transform: translateY(0);
    }
    /* Staggered animation delays */
    .animated-item.delay-1 { transition-delay: 0.1s; }
    .animated-item.delay-2 { transition-delay: 0.2s; }
    .animated-item.delay-3 { transition-delay: 0.3s; }
    .animated-item.delay-4 { transition-delay: 0.4s; }


    /* Responsive adjustments */
    @media (min-width: 769px) {
        #desktop-nav {
            display: flex;
        }
    }

    @media (max-width: 768px) {
      header {
        padding: 60px 15px;
        border-bottom-left-radius: 30px;
        border-bottom-right-radius: 30px;
      }
      header h1 {
        font-size: 2.8em;
      }
      header .subtitle {
        font-size: 1.2em;
      }
      header p:not(.subtitle) {
        font-size: 1.1em;
      }
      nav {
        justify-content: flex-end;
      }
      #hamburger-btn {
          display: block;
      }
      main {
        padding: 20px 15px;
        margin: 20px auto;
        border-radius: 15px;
      }
      section {
        margin-bottom: 50px;
        padding: 20px;
        border-radius: 10px;
      }
      h2 {
        font-size: 3.5em; /* ã‚¹ãƒãƒ›ã§ã®ã‚µã‚¤ã‚º */
        padding-left: 20px;
        margin-bottom: 35px;
      }
      p {
        font-size: 1.05em;
      }
      .team {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      .member {
        padding: 20px;
        border-radius: 12px;
      }
      .member h4 {
        font-size: 1.4em;
      }
      form {
        padding: 25px;
        border-radius: 15px;
      }
      input[type="text"],
      input[type="email"],
      input[type="password"],
      textarea {
        padding: 10px 12px;
        margin-bottom: 15px;
        border-radius: 8px;
        font-size: 0.95em;
      }
      input[type="submit"],
      .btn {
        padding: 10px 25px;
        border-radius: 8px;
        font-size: 1em;
      }
      footer {
        margin-top: 40px;
        padding: 20px;
        border-top-left-radius: 30px;
        border-top-right-radius: 30px;
      }
      #scrollToTopBtn {
        width: 40px;
        height: 40px;
        font-size: 1.5em;
        line-height: 40px;
        bottom: 20px;
        right: 20px;
      }
      #admin-section {
        padding: 20px;
        max-width: 100%;
        margin: 20px;
      }
      #admin-section h2 {
        font-size: 2em;
      }
      #admin-textarea {
        min-height: 300px;
        font-size: 1em;
      }
      .modal-content {
        padding: 20px;
      }
      .modal-btn {
        padding: 8px 15px;
        font-size: 0.9em;
      }
    }
    @media (max-width: 480px) {
      header h1 {
        font-size: 2.2em;
      }
      header .subtitle {
        font-size: 1.1em;
      }
      header p:not(.subtitle) {
        font-size: 1em;
      }
      h2 {
        font-size: 2.8em; /* ã•ã‚‰ã«å°ã•ã„ã‚¹ãƒãƒ›ã§ã®ã‚µã‚¤ã‚º */
      }
      #mobile-menu {
        max-width: 280px;
      }
    }

    /* Add styles for scrollbar and headerIn */
    #scrollbar{transition:width 0.25s ease-out;}
    body:not(.loading) header{animation:headerIn 0.8s ease-out 0.4s both;}
    @keyframes headerIn{from{opacity:0;transform:translateY(-40px);}to{opacity:1;transform:none;}}

    /* Dark/light theme toggle simple inversion */
    html.light-theme { filter: invert(1) hue-rotate(180deg) saturate(0.8); }
    html.light-theme img, html.light-theme video { filter: invert(1) hue-rotate(180deg) saturate(0.8); }

    /* Dark-toggle button hover */
    #dark-toggle { background:none; border:none; font-size:1.5em; cursor:pointer; transition:transform 0.3s ease; }
    #dark-toggle:hover { transform:scale(1.2) translateY(-2px); }

    /* Subtle background flourish */
    body::before {
        content: '';
        position: fixed;
        top: -50%;
        left: -25%;
        width: 150%;
        height: 150%;
        background: radial-gradient(circle at center, rgba(167, 243, 208, 0.15) 0%, transparent 70%);
        pointer-events: none;
        animation: bgFloat 20s ease-in-out infinite alternate;
        z-index: -1;
    }
    @keyframes bgFloat {
        0% { transform: translateY(0) scale(1); }
        50% { transform: translateY(-3%) scale(1.05); }
        100% { transform: translateY(0) scale(1); }
    }
  </style>
</head>
<body class="loading">

  <!-- Skip link for accessibility -->
  <a href="#main-content" class="sr-only focus:not-sr-only absolute top-0 left-0 m-2 bg-blue-900 text-white p-2 z-[10000] rounded">ãƒ¡ã‚¤ãƒ³ã¸ã‚¹ã‚­ãƒƒãƒ—</a>

  <!-- Scroll progress bar -->
  <div id="scrollbar" class="fixed top-0 left-0 h-1 bg-green-300 z-[9999]" style="width:0;"></div>

  <div id="preloader">
      <div class="loader-ring"></div>
  </div>

  <header>
    <h1>é•·é‡ã®å»ƒæ ¡æ®²æ»…è¨ˆç”»ï¼</h1>
    <p class="subtitle">Eradication Plan for Closed Schools</p>
    <p>åœ°åŸŸè³‡æºã‚’æœªæ¥ã¸ã¤ãªããƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</p>
  </header>
  <nav>
    <div id="desktop-nav">
        <a href="#mission" data-nav-id="mission" aria-label="ç§ãŸã¡ã®æƒ³ã„">ç§ãŸã¡ã®æƒ³ã„</a>
        <a href="#usage" data-nav-id="usage" aria-label="å»ƒæ ¡ã®æ´»ç”¨æ¡ˆ">å»ƒæ ¡ã®æ´»ç”¨æ¡ˆ</a>
        <a href="#challenges" data-nav-id="challenges" aria-label="å»ƒæ ¡ã®ç¾çŠ¶ã¨èª²é¡Œ">å»ƒæ ¡ã®ç¾çŠ¶ã¨èª²é¡Œ</a>
        <a href="#examples" data-nav-id="examples" aria-label="æ´»ç”¨äº‹ä¾‹">æ´»ç”¨äº‹ä¾‹</a>
        <a href="#nagano-details" data-nav-id="nagano-details" aria-label="é•·é‡ã®é­…åŠ›ã¨åœ°åŸŸæ€§">é•·é‡ã®é­…åŠ›</a>
        <a href="#team" data-nav-id="team" aria-label="ãƒãƒ¼ãƒ ç´¹ä»‹">ãƒãƒ¼ãƒ ç´¹ä»‹</a>
        <a href="#contact" data-nav-id="contact" aria-label="ãŠå•ã„åˆã‚ã›">ãŠå•ã„åˆã‚ã›</a>
        <a href="#" id="adminLink" aria-label="ç®¡ç†è€…ãƒšãƒ¼ã‚¸ã¸">ç®¡ç†è€…</a>
    </div>
    <button id="dark-toggle" class="ml-4 text-blue-200 focus:outline-none" aria-label="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿">ğŸŒ™</button>
  </nav>

  <button id="hamburger-btn" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹é–‰ã™ã‚‹" aria-expanded="false" aria-controls="mobile-menu">
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
    <span class="hamburger-line"></span>
  </button>

  <div id="mobile-menu">
    <a href="#mission" aria-label="ç§ãŸã¡ã®æƒ³ã„">ç§ãŸã¡ã®æƒ³ã„</a>
    <a href="#usage" aria-label="å»ƒæ ¡ã®æ´»ç”¨æ¡ˆ">å»ƒæ ¡ã®æ´»ç”¨æ¡ˆ</a>
    <a href="#challenges" aria-label="å»ƒæ ¡ã®ç¾çŠ¶ã¨èª²é¡Œ">å»ƒæ ¡ã®ç¾çŠ¶ã¨èª²é¡Œ</a>
    <a href="#examples" aria-label="æ´»ç”¨äº‹ä¾‹">æ´»ç”¨äº‹ä¾‹</a>
    <a href="#nagano-details" aria-label="é•·é‡ã®é­…åŠ›ã¨åœ°åŸŸæ€§">é•·é‡ã®é­…åŠ›</a>
    <a href="#team" aria-label="ãƒãƒ¼ãƒ ç´¹ä»‹">ãƒãƒ¼ãƒ ç´¹ä»‹</a>
    <a href="#contact" aria-label="ãŠå•ã„åˆã‚ã›">ãŠå•ã„åˆã‚ã›</a>
    <a href="#" id="adminLinkMobile" aria-label="ç®¡ç†è€…ãƒšãƒ¼ã‚¸ã¸">ç®¡ç†è€…</a>
  </div>

  <main id="main-content">
    <section id="mission" data-section>
      <h2 class="animated-item">ç§ãŸã¡ã®æƒ³ã„</h2>
      <div id="mission-content-container" class="animated-item delay-1">
        <!-- Content will be dynamically loaded here -->
      </div>
    </section>

    <section id="challenges" data-section>
      <h2 class="animated-item">å»ƒæ ¡ã®ç¾çŠ¶ã¨èª²é¡Œ</h2>
      <div id="challenges-content-container" class="animated-item delay-1">
        <!-- Content will be dynamically loaded here -->
      </div>
    </section>

    <section id="usage" data-section>
      <h2 class="animated-item">å»ƒæ ¡ã®å¤šæ§˜ãªæ´»ç”¨æ¡ˆ</h2>
      <div id="usage-intro-container" class="animated-item delay-1">
         <!-- Intro content will be dynamically loaded here -->
      </div>
      <div id="usage-ideas-container">
        <!-- Dynamic idea blocks will be inserted here -->
      </div>
    </section>

    <section id="examples" data-section>
      <h2 class="animated-item">å…¨å›½ãƒ»é•·é‡çœŒå†…ã®æ´»ç”¨äº‹ä¾‹</h2>
      <div id="examples-intro-container" class="animated-item delay-1">
         <!-- Intro content will be dynamically loaded here -->
      </div>
      <div id="examples-ideas-container">
        <!-- Dynamic idea blocks will be inserted here -->
      </div>
    </section>

    <section id="nagano-details" data-section>
      <h2 class="animated-item">é•·é‡ã®é­…åŠ›ã¨åœ°åŸŸæ€§</h2>
      <div id="nagano-details-content-container" class="animated-item delay-1">
        <!-- Content will be dynamically loaded here -->
      </div>
    </section>

    <section id="team" data-section>
      <h2 class="animated-item">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ³ãƒãƒ¼</h2>
      <div id="team-content-container" class="animated-item delay-1">
         <!-- Intro content will be dynamically loaded here -->
      </div>
      <div class="team" id="team-members-container">
        <!-- Dynamic team members will be inserted here -->
      </div>
    </section>
    <section id="contact" data-section>
      <h2 class="animated-item">ãŠå•ã„åˆã‚ã›</h2>
      <p class="mb-6 animated-item delay-1">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹ã”è³ªå•ã‚„ã”æ„è¦‹ã¯ã€ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ãŠå¯„ã›ãã ã•ã„ã€‚</p>
      <form id="contact-form" class="animated-item delay-2">
        <label for="name" class="block mb-2 text-blue-200">ãŠåå‰ï¼š</label>
        <input type="text" id="name" name="name" required aria-label="ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">

        <label for="email" class="block mb-2 text-blue-200">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼š</label>
        <input type="email" id="email" name="email" required aria-label="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">

        <label for="message" class="block mb-2 text-blue-200">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼š</label>
        <textarea id="message" name="message" rows="5" cols="40" aria-label="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>

        <input type="submit" value="é€ä¿¡" id="contact-submit-btn" class="btn">
      </form>
      <div id="form-message" class="mt-4 text-center" style="display:none;" aria-live="polite"></div>
    </section>
  </main>

  <!-- Admin Section -->
  <div id="admin-section">
    <h2>ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
    <div id="admin-password-container">
      <p class="mb-4">ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š</p>
      <div class="password-wrapper">
        <input type="password" id="admin-password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" aria-label="ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›">
        <span id="password-toggle-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
        </span>
      </div>
      <button id="admin-login-btn" class="btn btn-primary mt-4" aria-label="ãƒ­ã‚°ã‚¤ãƒ³">ãƒ­ã‚°ã‚¤ãƒ³</button>
      <p id="admin-message" class="mt-2 text-red-400" style="display: none;">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™ã€‚</p>
    </div>
    
    <div id="admin-content">
        <div id="admin-tabs">
            <button class="admin-tab-btn active" data-tab="content" aria-label="ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚¿ãƒ–">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†</button>
            <button class="admin-tab-btn" data-tab="discussion" aria-label="è­°è«–ã®ç®¡ç†ã‚¿ãƒ–">è­°è«–ã®ç®¡ç†</button>
            <button class="admin-tab-btn" data-tab="analytics" aria-label="åˆ†æã‚¿ãƒ–">åˆ†æ</button>
            <button class="admin-tab-btn" data-tab="notifications" aria-label="é€šçŸ¥ã‚¿ãƒ–">é€šçŸ¥</button>
            <button class="admin-tab-btn" data-tab="advanced" aria-label="é«˜åº¦ãªè¨­å®šã‚¿ãƒ–">é«˜åº¦ãªè¨­å®š</button>
        </div>

        <div id="admin-tab-container">
            <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚¿ãƒ– -->
            <div id="tab-content" class="admin-tab-pane active">
                <div class="admin-feature-block">
                    <h3>ã‚µã‚¤ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†</h3>
                    <p class="description">ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã®å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã‚„ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç›´æ¥ç·¨é›†ã—ã¾ã™ã€‚</p>
                    
                    <div class="mt-4">
                        <h4 class="text-lg text-blue-200 mb-2">ä¸»è¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®ç·¨é›†</h4>
                        <label for="mission-text-editor" class="block mb-2 text-blue-200">ç§ãŸã¡ã®æƒ³ã„:</label>
                        <textarea id="mission-text-editor" class="editable-content-textarea"></textarea>
                        <label for="challenges-text-editor" class="block mb-2 text-blue-200">å»ƒæ ¡ã®ç¾çŠ¶ã¨èª²é¡Œ:</label>
                        <textarea id="challenges-text-editor" class="editable-content-textarea"></textarea>
                        <label for="usage-intro-editor" class="block mb-2 text-blue-200">å»ƒæ ¡ã®å¤šæ§˜ãªæ´»ç”¨æ¡ˆ (å°å…¥æ–‡):</label>
                        <textarea id="usage-intro-editor" class="editable-content-textarea"></textarea>
                        <label for="examples-intro-editor" class="block mb-2 text-blue-200">æ´»ç”¨äº‹ä¾‹ (å°å…¥æ–‡):</label>
                        <textarea id="examples-intro-editor" class="editable-content-textarea"></textarea>
                        <label for="nagano-details-editor" class="block mb-2 text-blue-200">é•·é‡ã®é­…åŠ›ã¨åœ°åŸŸæ€§:</label>
                        <textarea id="nagano-details-editor" class="editable-content-textarea"></textarea>
                        <label for="team-content-editor" class="block mb-2 text-blue-200">ãƒãƒ¼ãƒ ç´¹ä»‹ (å°å…¥æ–‡):</label>
                        <textarea id="team-content-editor" class="editable-content-textarea"></textarea>
                        <label for="footer-text-editor" class="block mb-2 text-blue-200">ãƒ•ãƒƒã‚¿ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆ:</label>
                        <textarea id="footer-text-editor" class="editable-content-textarea"></textarea>
                        <button id="save-main-content-btn" class="btn btn-secondary mt-2">ä¸»è¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ä¿å­˜</button>
                    </div>
                </div>
                 <div class="admin-feature-block">
                    <h4 class="text-lg text-blue-200 mb-2">æ´»ç”¨æ¡ˆã®ç®¡ç†</h4>
                    <input type="text" id="new-usage-idea-title" class="w-full p-2 mb-2 rounded-md bg-gray-800 text-white border border-gray-600" placeholder="æ–°ã—ã„æ´»ç”¨æ¡ˆã®ã‚¿ã‚¤ãƒˆãƒ«">
                    <textarea id="new-usage-idea-description" class="editable-content-textarea" placeholder="æ–°ã—ã„æ´»ç”¨æ¡ˆã®èª¬æ˜"></textarea>
                    <button id="add-usage-idea-btn" class="btn btn-secondary mt-2">æ´»ç”¨æ¡ˆã‚’è¿½åŠ </button>
                    <div class="mt-4">
                        <h5 class="text-md text-blue-200 mb-2">æ—¢å­˜ã®æ´»ç”¨æ¡ˆ:</h5>
                        <ul id="usage-ideas-list-admin" class="admin-list"></ul>
                    </div>
                </div>
                <div class="admin-feature-block">
                    <h4 class="text-lg text-blue-200 mb-2">æ´»ç”¨äº‹ä¾‹ã®ç®¡ç†</h4>
                    <input type="text" id="new-example-idea-title" class="w-full p-2 mb-2 rounded-md bg-gray-800 text-white border border-gray-600" placeholder="æ–°ã—ã„æ´»ç”¨äº‹ä¾‹ã®ã‚¿ã‚¤ãƒˆãƒ«">
                    <textarea id="new-example-idea-description" class="editable-content-textarea" placeholder="æ–°ã—ã„æ´»ç”¨äº‹ä¾‹ã®èª¬æ˜"></textarea>
                    <button id="add-example-idea-btn" class="btn btn-secondary mt-2">æ´»ç”¨äº‹ä¾‹ã‚’è¿½åŠ </button>
                    <div class="mt-4">
                        <h5 class="text-md text-blue-200 mb-2">æ—¢å­˜ã®æ´»ç”¨äº‹ä¾‹:</h5>
                        <ul id="examples-ideas-list-admin" class="admin-list"></ul>
                    </div>
                </div>
                <div class="admin-feature-block">
                    <h4 class="text-lg text-blue-200 mb-2">ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã®ç®¡ç†</h4>
                    <input type="text" id="new-member-name" class="w-full p-2 mb-2 rounded-md bg-gray-800 text-white border border-gray-600" placeholder="æ–°ã—ã„ãƒ¡ãƒ³ãƒãƒ¼ã®åå‰">
                    <textarea id="new-member-role" class="editable-content-textarea" placeholder="æ–°ã—ã„ãƒ¡ãƒ³ãƒãƒ¼ã®å½¹å‰²ã¨èª¬æ˜"></textarea>
                    <button id="add-member-btn" class="btn btn-secondary mt-2">ãƒ¡ãƒ³ãƒãƒ¼ã‚’è¿½åŠ </button>
                    <div class="mt-4">
                        <h5 class="text-md text-blue-200 mb-2">æ—¢å­˜ã®ãƒ¡ãƒ³ãƒãƒ¼:</h5>
                        <ul id="team-members-list-admin" class="admin-list"></ul>
                    </div>
                </div>
            </div>

            <!-- è­°è«–ã®ç®¡ç†ã‚¿ãƒ– -->
            <div id="tab-discussion" class="admin-tab-pane">
                <div class="admin-feature-block">
                    <h3>è­°è«–ã®è¨˜éŒ²</h3>
                    <p class="description">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹è­°è«–ã®ãƒ†ãƒ¼ãƒã‚„è©³ç´°ãªãƒ¡ãƒ¢ã‚’è¨˜éŒ²ãƒ»ç®¡ç†ã—ã¾ã™ã€‚</p>
                    <label for="discussion-topic" class="block mb-2 text-blue-200 text-lg">è­°è«–ãƒ†ãƒ¼ãƒï¼š</label>
                    <input type="text" id="discussion-topic" class="w-full p-3 rounded-md bg-gray-800 text-white border border-gray-600" placeholder="è­°è«–ã®ãƒ†ãƒ¼ãƒã‚’å…¥åŠ›">
                    <label for="admin-textarea" class="block mb-2 mt-4 text-blue-200 text-lg">è­°è«–ãƒ¡ãƒ¢ / è©³ç´°ï¼š</label>
                    <textarea id="admin-textarea" class="w-full min-h-[400px] p-3 rounded-md bg-gray-800 text-white border border-gray-600 resize-y"></textarea>
                    <div class="flex justify-end gap-4 mt-4">
                        <button id="save-notes-btn" class="btn btn-secondary">ãƒ¡ãƒ¢ã‚’ä¿å­˜</button>
                        <button id="clear-notes-btn" class="btn btn-secondary">ãƒ¡ãƒ¢ã‚’ã‚¯ãƒªã‚¢</button>
                    </div>
                </div>
                <div class="admin-feature-block">
                    <h3>è­°è«–ãƒã‚¤ãƒ³ãƒˆã®ç®¡ç†</h3>
                    <p class="description">è­°è«–ã§å‡ºãŸé‡è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’ãƒªã‚¹ãƒˆã¨ã—ã¦è¿½åŠ ãƒ»ç®¡ç†ã—ã¾ã™ã€‚</p>
                    <input type="text" id="discussion-point-search" class="admin-search-input" placeholder="ãƒã‚¤ãƒ³ãƒˆã‚’æ¤œç´¢...">
                    <div class="flex gap-2 mb-3">
                        <input type="text" id="discussion-point-input" class="flex-grow p-3 rounded-md bg-gray-800 text-white border border-gray-600" placeholder="æ–°ã—ã„è­°è«–ãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ ">
                        <button id="add-point-btn" class="btn px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg">è¿½åŠ </button>
                    </div>
                    <ul id="discussion-points-list" class="admin-list"></ul>
                    <div class="flex justify-end mt-4">
                        <button id="clear-points-btn" class="btn btn-secondary">ãƒã‚¤ãƒ³ãƒˆã‚’ã‚¯ãƒªã‚¢</button>
                    </div>
                </div>
                <div class="admin-feature-block">
                    <h3>è­°äº‹éŒ²ã®ç®¡ç†</h3>
                    <p class="description">ä¼šè­°ã®è­°äº‹éŒ²ã‚’è¿½åŠ ã€ç·¨é›†ã€å‰Šé™¤ã—ã¾ã™ã€‚</p>
                    <input type="text" id="meeting-minutes-title" class="w-full p-2 mb-2 rounded-md bg-gray-800 text-white border border-gray-600" placeholder="è­°äº‹éŒ²ã®ã‚¿ã‚¤ãƒˆãƒ«">
                    <textarea id="meeting-minutes-content" class="editable-content-textarea" placeholder="è­°äº‹éŒ²ã®å†…å®¹"></textarea>
                    <button id="add-meeting-minutes-btn" class="btn btn-secondary mt-2">è­°äº‹éŒ²ã‚’è¿½åŠ </button>
                    <div class="mt-4">
                        <h5 class="text-md text-blue-200 mb-2">æ—¢å­˜ã®è­°äº‹éŒ²:</h5>
                        <ul id="meeting-minutes-list-admin" class="admin-list"></ul>
                    </div>
                </div>
            </div>

            <!-- åˆ†æã‚¿ãƒ– -->
            <div id="tab-analytics" class="admin-tab-pane">
                <div class="admin-feature-block">
                    <h3>ã‚µã‚¤ãƒˆãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯</h3>
                    <p class="description">ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹çŠ¶æ³ã‚’å¯è¦–åŒ–ã—ã¾ã™ã€‚</p>
                    <div class="bg-gray-900 rounded-lg p-4 mb-4">
                        <p class="text-gray-400">æœˆé–“è¨ªå•è€…æ•°: <span id="monthly-visitors" class="text-white font-bold"></span></p>
                        <p class="text-gray-400">ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼æ•°: <span id="page-views" class="text-white font-bold"></span></p>
                        <p class="text-gray-400">å¹³å‡æ»åœ¨æ™‚é–“: <span id="avg-time" class="text-white font-bold"></span></p>
                        <div class="mt-4 h-48 bg-blue-900 rounded-md flex items-center justify-center text-gray-500">
                            [ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚°ãƒ©ãƒ•ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼]
                        </div>
                    </div>
                    <button id="refresh-analytics-btn" class="btn btn-secondary">ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°</button>
                </div>
                <div class="admin-feature-block">
                    <h3>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆ</h3>
                    <p class="description">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚µã‚¤ãƒˆå†…ã§ã®è¡Œå‹•ã‚’åˆ†æã—ã¾ã™ã€‚</p>
                    <div class="bg-gray-900 rounded-lg p-4 mb-4">
                        <p class="text-gray-400">ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ•°: <span id="contact-submissions" class="text-white font-bold"></span></p>
                        <p class="text-gray-400">æœ€ã‚‚é–²è¦§ã•ã‚ŒãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³: <span id="most-viewed-section" class="text-white font-bold"></span></p>
                        <div class="mt-4 h-48 bg-blue-900 rounded-md flex items-center justify-center text-gray-500">
                            [ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã‚°ãƒ©ãƒ•ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼]
                        </div>
                    </div>
                </div>
                <div class="admin-feature-block">
                    <h3>åœ°ç†ãƒ‡ãƒ¼ã‚¿</h3>
                    <p class="description">è¨ªå•è€…ã®åœ°åŸŸåˆ†å¸ƒã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
                    <div class="bg-gray-900 rounded-lg p-4 mb-4 h-64 flex items-center justify-center text-gray-500">
                        [æ—¥æœ¬åœ°å›³ä¸Šã®è¨ªå•è€…åˆ†å¸ƒãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼]
                    </div>
                </div>
            </div>

            <!-- é€šçŸ¥ã‚¿ãƒ– -->
            <div id="tab-notifications" class="admin-tab-pane">
                <div class="admin-feature-block">
                    <h3>ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥</h3>
                    <p class="description">é‡è¦ãªã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ©ãƒ¼ãƒˆã‚„æ›´æ–°æƒ…å ±ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
                    <ul id="system-alerts-list" class="admin-list">
                        <!-- System alerts will be dynamically loaded here -->
                    </ul>
                    <button id="clear-alerts-btn" class="btn btn-secondary mt-2">é€šçŸ¥ã‚’ã‚¯ãƒªã‚¢</button>
                </div>
                <div class="admin-feature-block">
                    <h3>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ç®±</h3>
                    <p class="description">ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰é€ä¿¡ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
                    <ul id="user-messages-list" class="admin-list">
                        <!-- User messages will be dynamically loaded here -->
                    </ul>
                    <button id="load-more-messages-btn" class="btn btn-secondary mt-2">ã•ã‚‰ã«èª­ã¿è¾¼ã‚€</button>
                </div>
                <div class="admin-feature-block">
                    <h3>é€šçŸ¥è¨­å®š</h3>
                    <p class="description">é€šçŸ¥ã®å—ä¿¡è¨­å®šã‚’ç®¡ç†ã—ã¾ã™ã€‚</p>
                    <div class="flex items-center mb-2">
                        <input type="checkbox" id="email-notifications" class="mr-2">
                        <label for="email-notifications" class="text-blue-200">ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã‚’æœ‰åŠ¹ã«ã™ã‚‹</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sms-notifications" class="mr-2">
                        <label for="sms-notifications" class="text-blue-200">SMSé€šçŸ¥ã‚’æœ‰åŠ¹ã«ã™ã‚‹</label>
                    </div>
                    <button id="save-notification-settings-btn" class="btn btn-secondary mt-4">è¨­å®šã‚’ä¿å­˜</button>
                </div>
            </div>

            <!-- é«˜åº¦ãªè¨­å®šã‚¿ãƒ– -->
            <div id="tab-advanced" class="admin-tab-pane">
                 <div class="admin-feature-block advanced-admin-feature">
                    <h3>é«˜åº¦ãªç®¡ç†æ©Ÿèƒ½</h3>
                    <p class="description">ã‚µã‚¤ãƒˆã®åŸºæœ¬è¨­å®šã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãªã©ã€ã‚ˆã‚Šé«˜åº¦ãªæ“ä½œã‚’è¡Œã„ã¾ã™ã€‚</p>
                    <div class="mt-4">
                      <h4 class="text-lg text-blue-200 mb-2">ã‚µã‚¤ãƒˆè¨­å®š</h4>
                      <label for="site-title-input" class="block mb-2 text-blue-200">ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ«:</label>
                      <input type="text" id="site-title-input" class="w-full p-2 mb-2 rounded-md bg-gray-800 text-white border border-gray-600" placeholder="ã‚µã‚¤ãƒˆã®æ–°ã—ã„ã‚¿ã‚¤ãƒˆãƒ«">
                      <label for="welcome-message-input" class="block mb-2 text-blue-200">ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</label>
                      <textarea id="welcome-message-input" rows="3" class="w-full p-2 mb-2 rounded-md bg-gray-800 text-white border border-gray-600" placeholder="æ–°ã—ã„ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"></textarea>
                      <button id="update-site-settings-btn" class="btn btn-secondary mt-2">è¨­å®šã‚’æ›´æ–°</button>
                    </div>
                </div>
                <div class="admin-feature-block advanced-admin-feature">
                    <h4 class="text-lg text-blue-200 mb-2">ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</h4>
                    <input type="text" id="user-search-input" class="admin-search-input" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢...">
                    <div class="flex gap-2 mb-3">
                        <input type="text" id="user-name-input" class="flex-grow p-3 rounded-md bg-gray-800 text-white border border-gray-600" placeholder="æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼å">
                        <button id="add-user-btn" class="btn px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg">è¿½åŠ </button>
                    </div>
                    <ul id="user-list" class="admin-list"></ul>
                </div>
                <div class="admin-feature-block advanced-admin-feature">
                    <h4 class="text-lg text-blue-200 mb-2">APIã‚­ãƒ¼ç®¡ç†</h4>
                    <p class="mb-2">ç¾åœ¨ã®APIã‚­ãƒ¼: <code id="current-api-key" class="text-yellow-300"></code></p>
                    <button id="generate-api-key-btn" class="btn btn-secondary">æ–°ã—ã„APIã‚­ãƒ¼ã‚’ç”Ÿæˆ</button>
                </div>
                <div class="admin-feature-block advanced-admin-feature">
                    <h4 class="text-lg text-blue-200 mb-2">ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨å¾©å…ƒ</h4>
                    <button id="create-backup-btn" class="btn btn-secondary">ä»Šã™ããƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ</button>
                    <button id="restore-backup-btn" class="btn btn-secondary ml-2">ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ</button>
                </div>
                <div class="admin-feature-block advanced-admin-feature">
                    <h4 class="text-lg text-blue-200 mb-2">ãã®ä»–ã®è¨­å®š</h4>
                    <div>
                      <p class="mb-2">äºŒè¦ç´ èªè¨¼: <span id="mfa-status"></span></p>
                      <button id="enable-mfa-btn" class="btn btn-secondary">æœ‰åŠ¹ã«ã™ã‚‹</button>
                    </div>
                    <div class="mt-4">
                      <p class="mb-2">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³: <span id="active-sessions"></span></p>
                      <button id="terminate-session-btn" class="btn btn-secondary">å…¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†</button>
                    </div>
                    <div class="mt-4">
                      <p class="mb-2">æœ€æ–°ãƒ­ã‚°: <code id="recent-log"></code></p>
                      <button id="view-log-btn" class="btn btn-secondary">ãƒ­ã‚°ã‚’è¡¨ç¤º</button>
                    </div>
                </div>
            </div>
        </div>
        <button id="admin-back-btn" class="btn btn-primary mt-12">ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</button>
    </div>
  </div>

  <button id="scrollToTopBtn" title="ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹" aria-label="ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«">â†‘</button>

  <!-- Custom Modal for Alerts -->
  <div id="custom-alert-modal" class="modal-overlay">
    <div class="modal-content">
      <p id="custom-alert-message"></p>
      <button id="custom-alert-ok-btn" class="modal-btn">OK</button>
    </div>
  </div>

  <!-- Custom Modal for Confirms -->
  <div id="custom-confirm-modal" class="modal-overlay">
    <div class="modal-content">
      <p id="custom-confirm-message"></p>
      <div class="modal-actions">
        <button id="custom-confirm-ok-btn" class="modal-btn">ã¯ã„</button>
        <button id="custom-confirm-cancel-btn" class="modal-btn modal-btn-cancel">ã„ã„ãˆ</button>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        // ä¸»è¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ç®¡ç†è€…ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®DOMè¦ç´ ã‚’å–å¾—
        const mainContent = document.getElementById("main-content");
        const adminSection = document.getElementById("admin-section");
        const adminLink = document.getElementById("adminLink");
        const adminPasswordInput = document.getElementById("admin-password");
        const adminLoginBtn = document.getElementById("admin-login-btn");
        const adminPasswordContainer = document.getElementById("admin-password-container");
        const adminContent = document.getElementById("admin-content");
        const adminBackBtn = document.getElementById("admin-back-btn");
        const adminMessage = document.getElementById("admin-message");

        // ç®¡ç†è€…ãƒšãƒ¼ã‚¸æ©Ÿèƒ½é–¢é€£ã®DOMè¦ç´ 
        const discussionTopicInput = document.getElementById("discussion-topic");
        const adminTextarea = document.getElementById("admin-textarea");
        const saveNotesBtn = document.getElementById("save-notes-btn");
        const clearNotesBtn = document.getElementById("clear-notes-btn");
        const discussionPointInput = document.getElementById("discussion-point-input");
        const addPointBtn = document.getElementById("add-point-btn");
        const discussionPointsList = document.getElementById("discussion-points-list");
        const clearPointsBtn = document.getElementById("clear-points-btn");
        const discussionPointSearch = document.getElementById("discussion-point-search");

        // æ–°ã—ã„è­°è«–ã‚¿ãƒ–ã®è¦ç´ 
        const meetingMinutesTitleInput = document.getElementById('meeting-minutes-title');
        const meetingMinutesContentTextarea = document.getElementById('meeting-minutes-content');
        const addMeetingMinutesBtn = document.getElementById('add-meeting-minutes-btn');
        const meetingMinutesListAdmin = document.getElementById('meeting-minutes-list-admin');

        // é«˜åº¦ãªç®¡ç†æ©Ÿèƒ½ã®DOMè¦ç´ 
        const mfaStatusSpan = document.getElementById("mfa-status");
        const enableMfaBtn = document.getElementById("enable-mfa-btn");
        const activeSessionsSpan = document.getElementById("active-sessions");
        const terminateSessionBtn = document.getElementById("terminate-session-btn");
        const recentLogCode = document.getElementById("recent-log");
        const viewLogBtn = document.getElementById("view-log-btn");

        // æ–°ã—ã„é«˜åº¦ãªç®¡ç†æ©Ÿèƒ½ã®DOMè¦ç´  (å…ƒã‹ã‚‰ã‚ã£ãŸã‚‚ã®)
        const siteTitleInput = document.getElementById("site-title-input");
        const welcomeMessageInput = document.getElementById("welcome-message-input");
        const updateSiteSettingsBtn = document.getElementById("update-site-settings-btn");
        const userNameInput = document.getElementById("user-name-input");
        const addUserBtn = document.getElementById("add-user-btn");
        const userList = document.getElementById("user-list");
        const userSearchInput = document.getElementById("user-search-input");
        const advancedAdminFeatures = document.querySelectorAll('.advanced-admin-feature');
        const currentApiKeySpan = document.getElementById('current-api-key');
        const generateApiKeyBtn = document.getElementById('generate-api-key-btn');
        const createBackupBtn = document.getElementById('create-backup-btn');
        const restoreBackupBtn = document.getElementById('restore-backup-btn');


        // æ–°ã—ã„åˆ†æã‚¿ãƒ–ã®è¦ç´ 
        const monthlyVisitorsSpan = document.getElementById('monthly-visitors');
        const pageViewsSpan = document.getElementById('page-views');
        const avgTimeSpan = document.getElementById('avg-time');
        const refreshAnalyticsBtn = document.getElementById('refresh-analytics-btn');
        const contactSubmissionsSpan = document.getElementById('contact-submissions');
        const mostViewedSectionSpan = document.getElementById('most-viewed-section');

        // æ–°ã—ã„é€šçŸ¥ã‚¿ãƒ–ã®è¦ç´ 
        const systemAlertsList = document.getElementById('system-alerts-list');
        const clearAlertsBtn = document.getElementById('clear-alerts-btn');
        const userMessagesList = document.getElementById('user-messages-list');
        const loadMoreMessagesBtn = document.getElementById('load-more-messages-btn');
        const emailNotificationsCheckbox = document.getElementById('email-notifications');
        const smsNotificationsCheckbox = document.getElementById('sms-notifications');
        const saveNotificationSettingsBtn = document.getElementById('save-notification-settings-btn');


        // ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä¿¡ãƒœã‚¿ãƒ³
        const contactSubmitBtn = document.getElementById('contact-submit-btn');

        // æ–°ã—ãè¿½åŠ ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ç”¨DOMè¦ç´ 
        const missionContentContainer = document.getElementById('mission-content-container');
        const challengesContentContainer = document.getElementById('challenges-content-container');
        const usageIntroContainer = document.getElementById('usage-intro-container');
        const usageIdeasContainer = document.getElementById('usage-ideas-container');
        const examplesIntroContainer = document.getElementById('examples-intro-container');
        const examplesIdeasContainer = document.getElementById('examples-ideas-container');
        const naganoDetailsContentContainer = document.getElementById('nagano-details-content-container');
        const teamContentContainer = document.getElementById('team-content-container');
        const teamMembersContainer = document.getElementById('team-members-container');
        // Moved inside DOMContentLoaded
        const footerTextContainer = document.querySelector('footer'); 

        const missionTextEditor = document.getElementById('mission-text-editor');
        const challengesTextEditor = document.getElementById('challenges-text-editor');
        const usageIntroEditor = document.getElementById('usage-intro-editor');
        const examplesIntroEditor = document.getElementById('examples-intro-editor');
        const naganoDetailsEditor = document.getElementById('nagano-details-editor');
        const teamContentEditor = document.getElementById('team-content-editor');
        const footerTextEditor = document.getElementById('footer-text-editor');
        const saveMainContentBtn = document.getElementById('save-main-content-btn');

        const newUsageIdeaTitleInput = document.getElementById('new-usage-idea-title');
        const newUsageIdeaDescriptionInput = document.getElementById('new-usage-idea-description');
        const addUsageIdeaBtn = document.getElementById('add-usage-idea-btn');
        const usageIdeasListAdmin = document.getElementById('usage-ideas-list-admin');

        const newExampleIdeaTitleInput = document.getElementById('new-example-idea-title');
        const newExampleIdeaDescriptionInput = document.getElementById('new-example-idea-description');
        const addExampleIdeaBtn = document.getElementById('add-example-idea-btn');
        const examplesIdeasListAdmin = document.getElementById('examples-ideas-list-admin');

        const newMemberNameInput = document.getElementById('new-member-name');
        const newMemberRoleInput = document.getElementById('new-member-role');
        const addMemberBtn = document.getElementById('add-member-btn');
        const teamMembersListAdmin = document.getElementById('team-members-list-admin');


        // --- ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–¢é€£ã®DOMè¦ç´  ---
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuLinks = mobileMenu.querySelectorAll('a');
        const adminLinkMobile = document.getElementById('adminLinkMobile');

        // --- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤ºæ©Ÿèƒ½é–¢é€£ã®DOMè¦ç´  ---
        const passwordToggleIcon = document.getElementById('password-toggle-icon');

        // --- ç®¡ç†è€…ã‚¿ãƒ–é–¢é€£ ---
        const adminTabs = document.getElementById('admin-tabs');
        const adminTabPanes = document.querySelectorAll('.admin-tab-pane');

        // ç‰¹å®šã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã¨ãƒšã‚¤ãƒ³ã®è¦ç´ ã‚’å–å¾—
        const analyticsTabBtn = document.querySelector('.admin-tab-btn[data-tab="analytics"]');
        const notificationsTabBtn = document.querySelector('.admin-tab-btn[data-tab="notifications"]');
        const advancedTabBtn = document.querySelector('.admin-tab-btn[data-tab="advanced"]');
        const tabAnalyticsPane = document.getElementById('tab-analytics');
        const tabNotificationsPane = document.getElementById('tab-notifications');
        const tabAdvancedPane = document.getElementById('tab-advanced');
    
        // === ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®é›£èª­åŒ– ===
        const P_A = 'c2hpYmF1cmE='; // "shibaura" ã‚’Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
        const P_ADV = 'bmFnYW5vaGFpa291Z3JvdXA='; // "naganohaikougroup" ã‚’Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰

        let isAdvancedAdmin = false;

        // --- ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£ ---
        const customAlertDialog = document.getElementById('custom-alert-modal');
        const customAlertMessage = document.getElementById('custom-alert-message');
        const customAlertOkBtn = document.getElementById('custom-alert-ok-btn');

        const customConfirmDialog = document.getElementById('custom-confirm-modal');
        const customConfirmMessage = document.getElementById('custom-confirm-message');
        const customConfirmOkBtn = document.getElementById('custom-confirm-ok-btn');
        const customConfirmCancelBtn = document.getElementById('custom-confirm-cancel-btn');

        let confirmCallback = null;

        function showAlert(message) {
            customAlertMessage.textContent = message;
            customAlertDialog.classList.add('is-visible');
            customAlertOkBtn.focus();
            trapFocus(customAlertDialog);
        }

        function showConfirm(message, callback) {
            customConfirmMessage.innerHTML = message;
            confirmCallback = callback;
            customConfirmDialog.classList.add('is-visible');
            customConfirmOkBtn.focus();
            trapFocus(customConfirmDialog);
        }

        customAlertOkBtn.addEventListener('click', () => {
            customAlertDialog.classList.remove('is-visible');
            if(lastFocusedElement) lastFocusedElement.focus();
        });

        customConfirmOkBtn.addEventListener('click', () => {
            customConfirmDialog.classList.remove('is-visible');
            if(lastFocusedElement) lastFocusedElement.focus();
            if (confirmCallback) {
                confirmCallback(true);
                confirmCallback = null;
            }
        });

        customConfirmCancelBtn.addEventListener('click', () => {
            customConfirmDialog.classList.remove('is-visible');
            if(lastFocusedElement) lastFocusedElement.focus();
            if (confirmCallback) {
                confirmCallback(false);
                confirmCallback = null;
            }
        });

        window.alert = showAlert;
        window.confirm = showConfirm;

        function showLoading(buttonElement) {
            buttonElement.classList.add('btn-loading');
            buttonElement.disabled = true;
        }

        function hideLoading(buttonElement) {
            buttonElement.classList.remove('btn-loading');
            buttonElement.disabled = false;
        }
        
        function createRipple(event) {
            const button = event.currentTarget;
            const circle = document.createElement("span");
            const diameter = Math.max(button.clientWidth, button.clientHeight);
            const radius = diameter / 2;
            circle.style.width = circle.style.height = `${diameter}px`;
            circle.style.left = `${event.clientX - button.offsetLeft - radius}px`;
            circle.style.top = `${event.clientY - button.offsetTop - radius}px`;
            circle.classList.add("ripple");
            const ripple = button.getElementsByClassName("ripple")[0];
            if (ripple) {
                ripple.remove();
            }
            button.appendChild(circle);
        }

        const buttons = document.querySelectorAll(".btn");
        buttons.forEach(button => {
            button.addEventListener("click", createRipple);
        });

        // === Micro-interactions (hover pulse) ===
        buttons.forEach(button => {
            button.addEventListener('mouseenter', () => {
                button.classList.add('animate__animated','animate__pulse');
            });
            button.addEventListener('animationend', (e) => {
                if (e.animationName.includes('pulse')) {
                    button.classList.remove('animate__animated','animate__pulse');
                }
            });
        });

        const defaultContent = {
        mission: `å°‘å­åŒ–ã¨éç–åŒ–ãŒé€²è¡Œã™ã‚‹é•·é‡çœŒã«ãŠã„ã¦ã€å»ƒæ ¡ã¯å˜ãªã‚‹ç©ºãå®¶ã§ã¯ãªãã€åœ°åŸŸã®è¨˜æ†¶ã¨æœªæ¥ã®å¯èƒ½æ€§ã‚’ç§˜ã‚ãŸå¤§åˆ‡ãªè³‡æºã§ã™ã€‚ç§ãŸã¡ã¯ã€ã“ã‚Œã‚‰ã®å»ƒæ ¡ã‚’æ–°ãŸãªä¾¡å€¤ã‚’æŒã¤å ´æ‰€ã¨ã—ã¦å†ç”Ÿã—ã€åœ°åŸŸæ´»æ€§åŒ–ã«è²¢çŒ®ã™ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™ã€‚
    <p class="mt-4">é•·é‡çœŒã®äººå£ã¯2001å¹´ã®ãƒ”ãƒ¼ã‚¯ã‹ã‚‰æ¸›å°‘ã®ä¸€é€”ã‚’ãŸã©ã‚Šã€2024å¹´ã«ã¯200ä¸‡äººã‚’ä¸‹å›ã‚‹ã¨äºˆæ¸¬ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®äººå£æ¸›å°‘ã¨å°‘å­åŒ–ã®å½±éŸ¿ã§ã€çœŒå†…ã®å»ƒæ ¡æ•°ã¯å¹´ã€…å¢—åŠ ã—ã¦ãŠã‚Šã€åœ°åŸŸç¤¾ä¼šã«æ–°ãŸãªèª²é¡Œã‚’æŠ•ã’ã‹ã‘ã¦ã„ã¾ã™ã€‚ã—ã‹ã—ã€å»ƒæ ¡ã¯å˜ãªã‚‹è² ã®éºç”£ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‹ã¤ã¦å­ã©ã‚‚ãŸã¡ã®å£°ãŒéŸ¿ãæ¸¡ã£ãŸå­¦ã³èˆã¯ã€åœ°åŸŸæ–‡åŒ–ã®ä¸­å¿ƒã§ã‚ã‚Šã€æ–°ãŸãªå¯èƒ½æ€§ã‚’ç§˜ã‚ãŸå ´æ‰€ãªã®ã§ã™ã€‚</p>
    <p class="mt-4">é•·é‡çœŒã¯ã€é›„å¤§ãªåŒ—ã‚¢ãƒ«ãƒ—ã‚¹ã‚’å§‹ã‚ã¨ã™ã‚‹è±Šã‹ãªè‡ªç„¶ã€æ¸…ã‚‰ã‹ãªæ°´ã€ãã—ã¦æ­´å²ã¨æ–‡åŒ–ãŒæ¯ã¥ãé­…åŠ›çš„ãªåœ°åŸŸã§ã™ã€‚ã“ã®åœ°ã®å»ƒæ ¡ã‚’å†åˆ©ç”¨ã™ã‚‹ã“ã¨ã¯ã€è‡ªç„¶ã¨ã®å…±ç”Ÿã€ä¼çµ±ã®ç¶™æ‰¿ã€ãã—ã¦æ–°ã—ã„ãƒ©ã‚¤ãƒ•ã‚¹ã‚¿ã‚¤ãƒ«ã®ææ¡ˆã«ç¹‹ãŒã‚‹ã¨ä¿¡ã˜ã¦ã„ã¾ã™ã€‚ç§ãŸã¡ã¯ã€é•·é‡ã®é­…åŠ›ã‚’æœ€å¤§é™ã«å¼•ãå‡ºã—ã€æŒç¶šå¯èƒ½ãªåœ°åŸŸç¤¾ä¼šã‚’ç¯‰ãã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚</p>`,
        challenges: `é•·é‡çœŒã«ãŠã‘ã‚‹å»ƒæ ¡ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã„ãã¤ã‹ã®æ·±åˆ»ãªèª²é¡Œã‚’æŠ±ãˆã¦ã„ã¾ã™ã€‚
    <ul class="mt-4">
    <li><strong>ç¶­æŒç®¡ç†ã‚³ã‚¹ãƒˆã®å¢—å¤§</strong>: é›»æ°—ã€æ°´é“ã€æ–½è¨­ã®ä¿®ç¹•ã€å›ºå®šè³‡ç”£ç¨ãªã©ã€ä½¿ã‚ã‚Œã¦ã„ãªã„å»ºç‰©ã«ã‚‚ç¶­æŒè²»ç”¨ãŒã‹ã‹ã‚Šã€è‡ªæ²»ä½“ã‚„åœ°åŸŸã®è²¡æ”¿ã‚’åœ§è¿«ã—ã¦ã„ã¾ã™ã€‚è€æœ½åŒ–ãŒé€²ã‚€ã«ã¤ã‚Œã¦ã€ã“ã®ã‚³ã‚¹ãƒˆã¯ã•ã‚‰ã«å¢—å¤§ã™ã‚‹å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚</li>
    <li><strong>è€æœ½åŒ–ã¨å®‰å…¨æ€§ã®å•é¡Œ</strong>: é•·æœŸé–“ä½¿ç”¨ã•ã‚Œãªã„ã“ã¨ã§å»ºç‰©ã®è€æœ½åŒ–ãŒæ€¥é€Ÿã«é€²ã¿ã€å€’å£Šã®å±é™ºæ€§ã‚„ã€ä¸æ³•ä¾µå…¥ã«ã‚ˆã‚‹äº‹æ•…ã€ç«ç½ã€ã¾ãŸã¯çŠ¯ç½ªã®ãƒªã‚¹ã‚¯ãŒå¢—åŠ ã—ã¦ã„ã¾ã™ã€‚åœ°åŸŸä½æ°‘ã®å®‰å…¨ç¢ºä¿ãŒå–«ç·Šã®èª²é¡Œã§ã™ã€‚</li>
    <li><strong>æ™¯è¦³ã®æ‚ªåŒ–ã¨åœ°åŸŸã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä½ä¸‹</strong>: é›‘è‰ãŒç”Ÿã„èŒ‚ã‚Šã€çª“ã‚¬ãƒ©ã‚¹ãŒå‰²ã‚ŒãŸè’å»ƒã—ãŸå»ƒæ ¡ã¯ã€åœ°åŸŸã®æ™¯è¦³ã‚’è‘—ã—ãæã­ã¾ã™ã€‚ã“ã‚Œã¯ã€å¤–éƒ¨ã‹ã‚‰ã®è¨ªå•è€…ã‚„ç§»ä½å¸Œæœ›è€…ã«å¯¾ã—ã¦ãƒã‚¬ãƒ†ã‚£ãƒ–ãªå°è±¡ã‚’ä¸ãˆã€åœ°åŸŸå…¨ä½“ã®é­…åŠ›ä½ä¸‹ã«ã¤ãªãŒã‚Šã‹ã­ã¾ã›ã‚“ã€‚</li>
    <li><strong>åœ°åŸŸã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®ä¸­æ ¸æ©Ÿèƒ½ã®å–ªå¤±</strong>: å­¦æ ¡ã¯ã€ã‹ã¤ã¦é‹å‹•ä¼šã‚„æ–‡åŒ–ç¥­ã€åœ°åŸŸã®ãŠç¥­ã‚Šãªã©ã€æ§˜ã€…ãªã‚¤ãƒ™ãƒ³ãƒˆã®ä¼šå ´ã§ã‚ã‚Šã€åœ°åŸŸä½æ°‘ã®äº¤æµã®ä¸­å¿ƒã§ã—ãŸã€‚å»ƒæ ¡ã«ã‚ˆã‚Šã€ãã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å½¢æˆã®å ´ãŒå¤±ã‚ã‚Œã€åœ°åŸŸç¤¾ä¼šã®æ´»åŠ›ãŒä½ä¸‹ã™ã‚‹å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚ç‰¹ã«é«˜é½¢åŒ–ãŒé€²ã‚€åœ°åŸŸã§ã¯ã€ã“ã®å½±éŸ¿ã¯æ·±åˆ»ã§ã™ã€‚</li>
    <li><strong>è²´é‡ãªåœ°åŸŸè³‡æºã®æ©Ÿä¼šæå¤±</strong>: åºƒå¤§ãªæ•·åœ°ã‚„ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªæ§‹é€ ã€ãã—ã¦åœ°åŸŸã®æ­´å²ã‚’åˆ»ã‚“ã å»ƒæ ¡ã¯ã€æœ¬æ¥ã§ã‚ã‚Œã°æ§˜ã€…ãªå‰µé€ çš„ãªæ´»ç”¨ãŒæœŸå¾…ã§ãã‚‹è²´é‡ãªåœ°åŸŸè³‡æºã§ã™ã€‚ã—ã‹ã—ã€é©åˆ‡ãªæ´»ç”¨ç­–ãŒè¦‹å‡ºã›ãªã„ã“ã¨ã§ã€ãã®æ½œåœ¨çš„ãªä¾¡å€¤ãŒå¤±ã‚ã‚Œã€åœ°åŸŸã®ç™ºå±•ã®æ©Ÿä¼šã‚’é€ƒã—ã¦ã„ã¾ã™ã€‚</li>
    </ul>
    <p class="mt-6">é•·é‡çœŒã§ã¯ã€ç‰¹ã«å±±é–“éƒ¨ã‚„ä¸­å±±é–“åœ°åŸŸã§ã“ã®å•é¡ŒãŒé¡•è‘—ã§ã™ã€‚åœ°åŸŸã®é«˜é½¢åŒ–ãŒé€²ã‚€ä¸€æ–¹ã§ã€è‹¥å¹´å±¤ã®æµå‡ºãŒç¶šãã€åœ°åŸŸã‚’æ”¯ãˆã‚‹äººæãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å»ƒæ ¡ã®æœ‰åŠ¹æ´»ç”¨ã«å‘ã‘ãŸè­°è«–ã‚„å®Ÿè¡ŒãŒåœæ»ã—ãŒã¡ã§ã™ã€‚ã—ã‹ã—ã€ç§ãŸã¡ã¯ã“ã®èª²é¡Œã‚’ã€æ–°ãŸãªç™ºæƒ³ã¨åœ°åŸŸå†…å¤–ã®é€£æºã§ä¹—ã‚Šè¶Šãˆã‚‰ã‚Œã‚‹ã¨ä¿¡ã˜ã¦ã„ã¾ã™ã€‚</p>`,
        usageIntro: `ç§ãŸã¡ã¯ã€å»ƒæ ¡ãŒæŒã¤ç„¡é™ã®å¯èƒ½æ€§ã‚’ä¿¡ã˜ã€åœ°åŸŸã«æ ¹ã–ã—ãŸå¤šæ§˜ãªæ´»ç”¨ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ææ¡ˆã—ã¾ã™ã€‚ãã‚Œãã‚Œã®æ¡ˆãŒã€åœ°åŸŸã®ç‰¹æ€§ã¨ãƒ‹ãƒ¼ã‚ºã«åˆè‡´ã™ã‚‹ã‚ˆã†ã«æ¤œè¨ã•ã‚Œã¦ã„ã¾ã™ã€‚`,
        examplesIntro: `å»ƒæ ¡ã®æ´»ç”¨ã¯ã€åœ°åŸŸã®èª²é¡Œè§£æ±ºã¨æ´»æ€§åŒ–ã«ç¹‹ãŒã‚‹æˆåŠŸäº‹ä¾‹ãŒå¤šæ•°å­˜åœ¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®äº‹ä¾‹ã‹ã‚‰å­¦ã³ã€é•·é‡ã®å»ƒæ ¡ã«æœ€é©ãªæ´»ç”¨ç­–ã‚’è¦‹å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚`,
        naganoDetails: `é•·é‡çœŒã¯ã€æ—¥æœ¬ã®æœ¬å·ä¸­å¤®éƒ¨ã«ä½ç½®ã™ã‚‹å†…é™¸çœŒã§ã€ãã®åºƒå¤§ãªé¢ç©ã¨å¤šæ§˜ãªåœ°ç†çš„ç‰¹å¾´ãŒæœ€å¤§ã®é­…åŠ›ã§ã™ã€‚æ¨™é«˜3,000ãƒ¡ãƒ¼ãƒˆãƒ«ç´šã®å±±ã€…ãŒé€£ãªã‚‹ã€Œæ—¥æœ¬ã®å±‹æ ¹ã€ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã‚‹ä¸­å¤®ã‚¢ãƒ«ãƒ—ã‚¹ã€å—ã‚¢ãƒ«ãƒ—ã‚¹ã€é£›é¨¨å±±è„ˆï¼ˆåŒ—ã‚¢ãƒ«ãƒ—ã‚¹ï¼‰ã«å›²ã¾ã‚Œã€ç¾ã—ã„å±±å²³æ™¯è¦³ãŒåºƒãŒã£ã¦ã„ã¾ã™ã€‚
    <p class="mt-4">çœŒå†…ã«ã¯ã€è«è¨ªæ¹–ã€æœ¨å´æ¹–ã€é‡å°»æ¹–ãªã©ã€è‡ªç„¶è±Šã‹ãªæ¹–æ²¼ãŒç‚¹åœ¨ã—ã€åƒæ›²å·ã€å¤©ç«œå·ã¨ã„ã£ãŸå¤§æ²³ã®æºæµã‚‚æŠ±ãˆã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚‰ã®è±Šã‹ãªæ°´è³‡æºã¯ã€è¾²æ¥­ã‚„åœ°åŸŸæ–‡åŒ–ã‚’è‚²ã‚“ã§ãã¾ã—ãŸã€‚æ°—å€™ã¯ã€æ¨™é«˜ã‚„åœ°åŸŸã«ã‚ˆã£ã¦å¤§ããç•°ãªã‚Šã€å†¬ã¯å¯’ãç©é›ªãŒå¤šã„ã§ã™ãŒã€å¤ã¯å†·æ¶¼ã§éã”ã—ã‚„ã™ã„åœ°åŸŸãŒå¤šã„ã®ãŒç‰¹å¾´ã§ã™ã€‚ç‰¹ã«ã€è»½äº•æ²¢ã‚„ä¸Šé«˜åœ°ãªã©ã®é«˜åŸãƒªã‚¾ãƒ¼ãƒˆã¯ã€å¤ã®é¿æš‘åœ°ã¨ã—ã¦äººæ°—ã‚’é›†ã‚ã¦ã„ã¾ã™ã€‚</p>
    <p class="mt-4">æ–‡åŒ–çš„ã«ã¯ã€å¤ãã‹ã‚‰å®¿å ´ç”ºã¨ã—ã¦æ „ãˆãŸæ­´å²ã‚’æŒã¡ã€å–„å…‰å¯ºã«ä»£è¡¨ã•ã‚Œã‚‹å¯ºç¤¾ä»é–£ã€æ¾æœ¬åŸã®ã‚ˆã†ãªå›½å®ã®åŸéƒ­ãªã©ã€æ­´å²çš„å»ºé€ ç‰©ã‚‚è±Šå¯Œã§ã™ã€‚ã¾ãŸã€ä¼çµ±çš„ãªè•éº¦ã€ä¿¡å·å‘³å™Œã€åœ°é…’ãªã©ã®é£Ÿæ–‡åŒ–ã‚‚æ ¹ä»˜ã„ã¦ãŠã‚Šã€å­£ç¯€ã”ã¨ã®æ—¬ã®é£Ÿæã‚‚è±Šã‹ã§ã™ã€‚ã‚¦ã‚£ãƒ³ã‚¿ãƒ¼ã‚¹ãƒãƒ¼ãƒ„ã€ç™»å±±ã€æ¸©æ³‰ã€ãƒã‚¤ã‚­ãƒ³ã‚°ãªã©ã€å››å­£ã‚’é€šã˜ã¦å¤šæ§˜ãªã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã‚’æ¥½ã—ã‚€ã“ã¨ãŒã§ãã€å›½å†…å¤–ã‹ã‚‰å¤šãã®è¦³å…‰å®¢ãŒè¨ªã‚Œã¾ã™ã€‚åœ°åŸŸã”ã¨ã«ç•°ãªã‚‹ã€Œä¿¡å·ã‚‰ã—ã•ã€ãŒæ„Ÿã˜ã‚‰ã‚Œã‚‹ã€é­…åŠ›ã‚ãµã‚Œã‚‹çœŒã§ã™ã€‚</p>`,
        teamContent: `ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€å»ƒæ ¡å•é¡Œã«çœŸæ‘¯ã«å‘ãåˆã„ã€åœ°åŸŸã«æ–°ãŸãªæ¯å¹ã‚’å¹ãè¾¼ã‚€ã“ã¨ã‚’ç›®æŒ‡ã™æƒ…ç†±çš„ãªãƒ¡ãƒ³ãƒãƒ¼ã«ã‚ˆã£ã¦æ¨é€²ã•ã‚Œã¦ã„ã¾ã™ã€‚ç§ãŸã¡ã¯ãã‚Œãã‚Œã®å°‚é–€çŸ¥è­˜ã¨çµŒé¨“ã‚’çµé›†ã—ã€å»ƒæ ¡ãŒæŒã¤æ½œåœ¨çš„ãªä¾¡å€¤ã‚’æœ€å¤§é™ã«å¼•ãå‡ºã™ãŸã‚ã®å¤šè§’çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¨¡ç´¢ã—ã¦ã„ã¾ã™ã€‚`,
        siteTitle: 'é•·é‡ã®å»ƒæ ¡æ®²æ»…è¨ˆç”»ï¼',
        welcomeMessage: 'åœ°åŸŸè³‡æºã‚’æœªæ¥ã¸ã¤ãªããƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ',
        footerText: 'Â© 2025 é•·é‡ã®å»ƒæ ¡æ®²æ»…è¨ˆç”»ï¼ All Rights Reserved.'
        };

        const defaultIdeas = [
        { id: 'u1', type: 'usage', title: 'åœ°åŸŸäº¤æµãƒ»æ´»å‹•æ‹ ç‚¹ã¨ã—ã¦ã®å†ç”Ÿ', description: 'ä½¿ã‚ã‚Œãªããªã£ãŸæ•™å®¤ã‚„ä½“è‚²é¤¨ã‚’ã€å¤šä¸–ä»£ãŒäº¤æµã§ãã‚‹å ´ã¨ã—ã¦å†æ§‹ç¯‰ã—ã¾ã™ã€‚åœ°åŸŸã®é›†ä¼šæ‰€ã€é«˜é½¢è€…ã‚µãƒ­ãƒ³ã€å­ã©ã‚‚ãŸã¡ã®éŠã³å ´ã€ã¾ãŸã¯åœ°å…ƒé£Ÿæã‚’æä¾›ã™ã‚‹ã‚«ãƒ•ã‚§ã‚„ãƒ‘ãƒ³å·¥æˆ¿ãªã©ã€èª°ã‚‚ãŒæ°—è»½ã«ç«‹ã¡å¯„ã‚Œã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ãªç©ºé–“ã‚’æä¾›ã—ã¾ã™ã€‚åœ°åŸŸã®ã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬ã‚„ã€ä½æ°‘åŒå£«ã®æ–°ã—ã„ã¤ãªãŒã‚Šã‚’ç”Ÿã¿å‡ºã™ãƒãƒ–ã¨ãªã‚Šã¾ã™ã€‚' },
        { id: 'u2', type: 'usage', title: 'è¦³å…‰ãƒ»å®¿æ³Šæ–½è¨­ã¸ã®è»¢æ›', description: 'å»ƒæ ¡ã®ãƒã‚¹ã‚¿ãƒ«ã‚¸ãƒƒã‚¯ãªé›°å›²æ°—ã¨åºƒã€…ã¨ã—ãŸç©ºé–“ã‚’æœ€å¤§é™ã«æ´»ã‹ã—ã€å®¿æ³Šä½“é¨“å‹æ–½è¨­ã‚„ãƒ¯ãƒ¼ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆä»•äº‹ã¨ä¼‘æš‡ã‚’çµ„ã¿åˆã‚ã›ãŸæ»åœ¨ï¼‰å‘ã‘ã®æ–½è¨­ã¨ã—ã¦æ•´å‚™ã—ã¾ã™ã€‚æ•™å®¤ã‚’å®¢å®¤ã«ã€ä½“è‚²é¤¨ã‚’å…±æœ‰ã‚¹ãƒšãƒ¼ã‚¹ã«æ”¹ä¿®ã—ã€éƒ½ä¼šã‹ã‚‰ã®è¨ªå•è€…ã‚„ä¼æ¥­ç ”ä¿®ã®èª˜è‡´ã«ã‚ˆã‚Šã€æ–°ãŸãªè¦³å…‰å®¢ã®æµã‚Œã¨åœ°åŸŸçµŒæ¸ˆã®æ´»æ€§åŒ–ã‚’ç”Ÿã¿å‡ºã—ã¾ã™ã€‚ä¿®å­¦æ—…è¡Œã®ã‚ˆã†ãªä½“é¨“ã‚‚æä¾›å¯èƒ½ã§ã™ã€‚' },
        { id: 'u3', type: 'usage', title: 'åœ°åŸŸè³‡æºã‚’å­¦ã¶ä½“é¨“å‹æ•™è‚²æ–½è¨­', description: 'åœ°å…ƒã®è±Šã‹ãªè‡ªç„¶ã‚„æ­´å²ã€ä¼çµ±æ–‡åŒ–ã‚’å­¦ã¹ã‚‹ä½“é¨“å‹ãƒŸãƒ¥ãƒ¼ã‚¸ã‚¢ãƒ ã‚„ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã‚¹ãƒšãƒ¼ã‚¹ã¨ã—ã¦æ´»ç”¨ã—ã¾ã™ã€‚ä¾‹ãˆã°ã€åœ°åŸŸã®å·¥èŠ¸å“ä½œã‚Šã€è¾²æ¥­ä½“é¨“ã€æ˜Ÿç©ºè¦³å¯Ÿãªã©ã€å­ã©ã‚‚ã‹ã‚‰å¤§äººã¾ã§ãŒé•·é‡ã®é­…åŠ›ã‚’æ·±ãçŸ¥ã‚Šã€æœªæ¥ã¸ã¨ã¤ãªãå­¦ã³ã®å ´ã‚’å‰µå‡ºã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åœ°åŸŸå¤–ã‹ã‚‰ã®æ•™è‚²æ—…è¡Œã®èª˜è‡´ã‚‚æœŸå¾…ã§ãã¾ã™ã€‚' },
        { id: 'u4', type: 'usage', title: 'ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãƒ»ã‚¢ãƒ¼ãƒˆãƒãƒ–ã¨ã—ã¦ã®æ´»ç”¨', description: 'åºƒã„ç©ºé–“ã‚„ç‹¬ç‰¹ã®é›°å›²æ°—ã‚’æ´»ã‹ã—ã¦ã€ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã®ã‚¢ãƒˆãƒªã‚¨ã€ã‚®ãƒ£ãƒ©ãƒªãƒ¼ã€éŸ³æ¥½ã‚¹ã‚¿ã‚¸ã‚ªã€æ¼”åŠ‡ã®ç¨½å¤å ´ãªã©ã€ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãªæ´»å‹•ã®æ‹ ç‚¹ã¨ã—ã¾ã™ã€‚åœ°åŸŸå†…å¤–ã®ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãŒé›†ã¾ã‚‹ã“ã¨ã§ã€æ–°ãŸãªæ–‡åŒ–ã®ç™ºä¿¡åœ°ã¨ãªã‚Šã€è‹¥è€…ã®ç§»ä½ä¿ƒé€²ã‚„åœ°åŸŸã¸ã®å®šç€ã«ã‚‚ã¤ãªãŒã‚Šã¾ã™ã€‚ã‚¢ãƒ¼ãƒˆã‚¤ãƒ™ãƒ³ãƒˆã‚„ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—ã®é–‹å‚¬ã‚‚å¯èƒ½ã§ã™ã€‚' },
        { id: 'u5', type: 'usage', title: 'é˜²ç½æ‹ ç‚¹ãƒ»åœ°åŸŸãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹å¼·åŒ–æ–½è¨­', description: `ç½å®³æ™‚ã«ã¯é¿é›£æ‰€ã‚„ç‰©è³‡ã®å‚™è“„æ‹ ç‚¹ã¨ã—ã¦æ©Ÿèƒ½ã•ã›ã‚‹ã¨ã¨ã‚‚ã«ã€å¹³æ™‚ã«ã¯é˜²ç½è¨“ç·´ã‚„åœ°åŸŸä½æ°‘ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å½¢æˆã®å ´ã¨ã—ã¦æ´»ç”¨ã—ã¾ã™ã€‚åœ°åŸŸä½æ°‘ãŒé˜²ç½æ„è­˜ã‚’é«˜ã‚ã€æœ‰äº‹ã®éš›ã«äº’ã„ã«åŠ©ã‘åˆãˆã‚‹å¼·é­ãªã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚’ç¯‰ããŸã‚ã®é‡è¦ãªã‚¤ãƒ³ãƒ•ãƒ©ã¨ãªã‚Šã¾ã™ã€‚å‚™è“„å€‰åº«ã‚„ç°¡æ˜“ã‚·ãƒ£ãƒ¯ãƒ¼æ–½è¨­ãªã©ã‚‚æ•´å‚™å¯èƒ½ã§ã™ã€‚æ‰‹é–“ã‚’ã‹ã‘ãšã«ã€åœ°åŸŸç”£æ¥­æŒ¯èˆˆã®ãŸã‚ã®æ–½è¨­ã¨ã—ã¦ã€å»ƒæ ¡ã®æ•·åœ°ã‚„å»ºç‰©ã‚’æ´»ç”¨ã—ã€åœ°åŸŸã®ç‰¹ç”£å“åŠ å·¥æ–½è¨­ã€åœ°é…’ã®é†¸é€ æ‰€ã€ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«ã®ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã€ã¾ãŸã¯å°è¦æ¨¡ãªå·¥å ´ã¨ã—ã¦è»¢ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ–°ãŸãªé›‡ç”¨ã‚’å‰µå‡ºã—ã€åœ°åŸŸçµŒæ¸ˆã®æ´»æ€§åŒ–ã«ç›´æ¥è²¢çŒ®ã—ã¾ã™ã€‚è£½å“ã®ç›´å£²æ‰€ã‚„ä½“é¨“ã‚³ãƒ¼ãƒŠãƒ¼ã‚’ä½µè¨­ã™ã‚‹ã“ã¨ã§ã€è¦³å…‰å®¢ã®èª˜è‡´ã«ã‚‚ç¹‹ãŒã‚Šã¾ã™ã€‚` },
        { id: 'u6', type: 'usage', title: 'åœ°åŸŸç”£æ¥­æŒ¯èˆˆã®ãŸã‚ã®æ–½è¨­', description: 'å»ƒæ ¡ã®æ•·åœ°ã‚„å»ºç‰©ã‚’æ´»ç”¨ã—ã€åœ°åŸŸã®ç‰¹ç”£å“åŠ å·¥æ–½è¨­ã€åœ°é…’ã®é†¸é€ æ‰€ã€ã‚¯ãƒ©ãƒ•ãƒˆãƒ“ãƒ¼ãƒ«ã®ãƒ–ãƒ«ãƒ¯ãƒªãƒ¼ã€ã¾ãŸã¯å°è¦æ¨¡ãªå·¥å ´ã¨ã—ã¦è»¢ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æ–°ãŸãªé›‡ç”¨ã‚’å‰µå‡ºã—ã€åœ°åŸŸçµŒæ¸ˆã®æ´»æ€§åŒ–ã«ç›´æ¥è²¢çŒ®ã—ã¾ã™ã€‚è£½å“ã®ç›´å£²æ‰€ã‚„ä½“é¨“ã‚³ãƒ¼ãƒŠãƒ¼ã‚’ä½µè¨­ã™ã‚‹ã“ã¨ã§ã€è¦³å…‰å®¢ã®èª˜è‡´ã«ã‚‚ç¹‹ãŒã‚Šã¾ã™ã€‚' },
        { id: 'e1', type: 'examples', title: 'é“ã®é§…ã€Œãã‚‰ã‚‰289ã€ï¼ˆç¦å³¶çœŒå—ä¼šæ´¥ç”ºï¼‰', description: 'æ—§å—éƒ·å°å­¦æ ¡ã®æ ¡èˆã‚’æ”¹ä¿®ã—ã€é“ã®é§…ã¨ã—ã¦ç”Ÿã¾ã‚Œå¤‰ã‚ã‚Šã¾ã—ãŸã€‚åœ°åŸŸã®ç‰¹ç”£å“è²©å£²ã€ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã€ä¼‘æ†©ã‚¹ãƒšãƒ¼ã‚¹ã«åŠ ãˆã€æ—§ä½“è‚²é¤¨ã‚’ã€Œæœ¨è‚²æ–½è¨­ã€ã¨ã—ã¦æ´»ç”¨ã—ã€å­ã©ã‚‚ãŸã¡ãŒæœ¨æã¨è§¦ã‚Œåˆã„ãªãŒã‚‰éŠã¹ã‚‹å ´ã¨ãªã£ã¦ã„ã¾ã™ã€‚åœ°åŸŸã®äº¤æµä¿ƒé€²ã¨è¦³å…‰å®¢èª˜è‡´ã«æˆåŠŸã—ãŸå¥½ä¾‹ã§ã™ã€‚' },
        { id: 'e2', type: 'examples', title: 'ã€Œã¡ã„ã•ãªã›ã‹ã„ã€ï¼ˆé•·é‡çœŒå¤§ç”ºå¸‚ï¼‰', description: 'æ—§ç¾éº»å°å­¦æ ¡ã‚’åˆ©ç”¨ã—ãŸå®¿æ³Šæ–½è¨­ã€‚æ ¡èˆã®é›°å›²æ°—ã‚’æ®‹ã—ã¤ã¤ã€ãƒ¢ãƒ€ãƒ³ãªãƒ‡ã‚¶ã‚¤ãƒ³ã¨å¿«é©æ€§ã‚’ä¸¡ç«‹ã•ã›ã€ãƒ¯ãƒ¼ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„åˆå®¿ã€ã‚¤ãƒ™ãƒ³ãƒˆåˆ©ç”¨ã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ä½µè¨­ã•ã‚ŒãŸã‚«ãƒ•ã‚§ã¯ã€åœ°åŸŸä½æ°‘ã‚„è¨ªå•è€…ã®äº¤æµã®å ´ã¨ã—ã¦ã‚‚æ©Ÿèƒ½ã—ã€åœ°åŸŸã«æ–°ãŸãªè³‘ã‚ã„ã‚’ã‚‚ãŸã‚‰ã—ã¦ã„ã¾ã™ã€‚<p class="mt-2">ã“ã®äº‹ä¾‹ã¯ã€é•·é‡çœŒãŒæŒã¤è‡ªç„¶ã®ç¾ã—ã•ã€é™å¯‚ãªç’°å¢ƒã€ãã—ã¦ç¾ã—ã„æ˜Ÿç©ºã‚„è±Šã‹ãªæ£®æ—ãŒã€éƒ½å¸‚éƒ¨ã®å–§é¨’ã‹ã‚‰é›¢ã‚Œã¦ä»•äº‹ã‚„ä¼‘æš‡ã‚’éã”ã—ãŸã„äººã€…ã«æ–°ãŸãªä¾¡å€¤ã‚’æä¾›ã§ãã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>' },
        { id: 'e3', type: 'examples', title: 'ã€Œæ˜Ÿã¨æ£®ã®ãƒ­ãƒãƒ³ãƒˆãƒ”ã‚¢ã€ï¼ˆé’æ£®çœŒå¼˜å‰å¸‚ï¼‰', description: 'æ—§å°å­¦æ ¡ã®è·¡åœ°ã«å»ºè¨­ã•ã‚ŒãŸå¤©æ–‡å°ã‚’æ ¸ã¨ã™ã‚‹ç·åˆãƒ¬ã‚¸ãƒ£ãƒ¼æ–½è¨­ã€‚å®¿æ³Šæ–½è¨­ã€æ¸©æ³‰ã€ã‚­ãƒ£ãƒ³ãƒ—å ´ãªã©ã‚‚å‚™ãˆã€æ˜Ÿç©ºè¦³æ¸¬ã‚’ãƒ†ãƒ¼ãƒã«ã—ãŸãƒ¦ãƒ‹ãƒ¼ã‚¯ãªä½“é¨“ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€åºƒç¯„å›²ã‹ã‚‰ã®è¦³å…‰å®¢ã‚’èª˜è‡´ã—ã€åœ°åŸŸã®è¦³å…‰æŒ¯èˆˆã«å¤§ããè²¢çŒ®ã—ã¦ã„ã¾ã™ã€‚' },
        { id: 'e4', type: 'examples', title: 'æ—§æ—¥ç¾©å°å­¦æ ¡ã€Œããã‚€ã‚‰ä½“é¨“äº¤æµé¤¨ã€ï¼ˆé•·é‡çœŒæœ¨æ›½ç”ºï¼‰', description: 'æœ¨æ›½ç”ºã®æ—§æ—¥ç¾©å°å­¦æ ¡ã¯ã€åœ°åŸŸä½æ°‘ã¨è¦³å…‰å®¢ãŒäº¤æµã§ãã‚‹ä½“é¨“äº¤æµé¤¨ã¨ã—ã¦æ´»ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚æœ¨å·¥ä½“é¨“ã‚„éƒ·åœŸæ–™ç†ä½œã‚Šãªã©ã€æœ¨æ›½ã®æ–‡åŒ–ã‚’ä½“é¨“ã§ãã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒæä¾›ã•ã‚Œã¦ãŠã‚Šã€åœ°åŸŸã®é­…åŠ›ã‚’ç™ºä¿¡ã™ã‚‹æ‹ ç‚¹ã¨ãªã£ã¦ã„ã¾ã™ã€‚' },
        { id: 'e5', type: 'examples', title: 'ã€Œã‚¹ã‚¿ã‚¸ã‚ªã‚¸ãƒ–ãƒªé¢¨ã®è°·ã®ãƒŠã‚¦ã‚·ã‚«ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚¢ãƒˆãƒªã‚¨ï¼ˆé•·é‡çœŒä¸‹è«è¨ªç”ºï¼‰', description: 'å…·ä½“çš„ãªæ–½è¨­åã§ã¯ãªã„ã§ã™ãŒã€é•·é‡çœŒå†…ã«ã¯å»ƒæ ¡ã‚’ã‚¢ãƒ¼ãƒˆã‚¹ã‚¿ã‚¸ã‚ªã‚„ã‚¢ãƒˆãƒªã‚¨ã¨ã—ã¦æ´»ç”¨ã—ã€è‡ªç„¶è±Šã‹ãªç’°å¢ƒã§å‰µä½œæ´»å‹•ã«é›†ä¸­ã§ãã‚‹ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ãŒç§»ä½ãƒ»æ´»å‹•ã™ã‚‹ä¾‹ãŒå¢—ãˆã¦ã„ã¾ã™ã€‚åœ°åŸŸã®é¢¨æ™¯ã¨èª¿å’Œã—ãŸã‚¢ãƒ¼ãƒˆæ´»å‹•ã¯ã€æ–°ãŸãªåœ°åŸŸãƒ–ãƒ©ãƒ³ãƒ‰ã®å‰µå‡ºã«ã‚‚ç¹‹ãŒã£ã¦ã„ã¾ã™ã€‚' }
        ];

        const defaultTeamMembers = [
        { id: 't1', name: 'åœ‹äº•ç§€å“‰', role: 'è³‡æ–™ä½œæˆãƒ»Webã‚µã‚¤ãƒˆåˆ¶ä½œçµ±æ‹¬æ‹…å½“ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ“ã‚¸ãƒ§ãƒ³ã‚’æ˜ç¢ºã«ã—ã€è¦–è¦šçš„ãªé­…åŠ›ã‚’æœ€å¤§é™ã«å¼•ãå‡ºã™ãŸã‚ã®è³‡æ–™ä½œæˆã¨Webã‚µã‚¤ãƒˆå…¨ä½“ã®çµ±æ‹¬ã‚’è¡Œã„ã¾ã—ãŸã€‚' },
        { id: 't2', name: 'å®‰è—¤å ªç¥', role: 'åœ°åŸŸä½æ°‘ã¨ã®å¯¾è©±ãƒ»è­°è«–æ¨é€²æ‹…å½“ã€‚ç¾åœ°ã§ã®è©³ç´°ãªãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚’é€šã˜ã¦ã€åœ°åŸŸã®æ–¹ã€…ã®ç”Ÿã®å£°ã‚„ãƒ‹ãƒ¼ã‚ºã‚’æ·±ãæ˜ã‚Šä¸‹ã’ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ–¹å‘æ€§ã‚’æ±ºå®šã™ã‚‹ä¸Šã§ã®é‡è¦ãªè­°è«–ã‚’ä¸»å°ã—ã¾ã—ãŸã€‚' },
        { id: 't3', name: 'åŠ è—¤åº·æˆ', role: 'ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è³‡æ–™ä½œæˆãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³æ‹…å½“ã€‚è¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿ã‚„æƒ…å ±ã‚’åˆ†ã‹ã‚Šã‚„ã™ãã€ã‹ã¤ç¾ã—ãå¯è¦–åŒ–ã™ã‚‹ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¹ã‚­ãƒ«ã‚’æ´»ã‹ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é­…åŠ›ã‚’åŠ¹æœçš„ã«ä¼ãˆã‚‹è³‡æ–™ã‚’ä½œæˆã—ã¾ã—ãŸã€‚' },
        { id: 't4', name: 'ä¼Šæ²¢å¨éœ–', role: 'ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³è³‡æ–™ä½œæˆãƒ»æŠ€è¡“ã‚µãƒãƒ¼ãƒˆæ‹…å½“ã€‚è³‡æ–™ä½œæˆã«ãŠã‘ã‚‹æŠ€è¡“çš„ãªå´é¢ï¼ˆã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢æ“ä½œã€ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãªã©ï¼‰ã‚’å¹…åºƒãã‚µãƒãƒ¼ãƒˆã—ã€ç™ºè¡¨ãŒã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œã‚ã‚Œã‚‹ã‚ˆã†èˆå°è£ã§æ”¯ãˆã¾ã—ãŸã€‚' }
        ];

        const defaultMeetingMinutes = [
            { id: 'm1', title: 'ç¬¬1å›ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¼šè­°', content: 'æ—¥æ™‚ï¼š2025å¹´6æœˆ1æ—¥\nè­°é¡Œï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„ã¨ç›®æ¨™è¨­å®š\næ±ºå®šäº‹é …ï¼šå»ƒæ ¡ã®å†åˆ©ç”¨ã‚’é€šã˜ã¦åœ°åŸŸæ´»æ€§åŒ–ã‚’ç›®æŒ‡ã™ã€‚' },
            { id: 'm2', title: 'ç¬¬2å›ç¾åœ°èª¿æŸ»å ±å‘Šä¼š', content: 'æ—¥æ™‚ï¼š2025å¹´6æœˆ15æ—¥\nè­°é¡Œï¼šé•·é‡çœŒå†…å»ƒæ ¡ã®ç¾çŠ¶ã¨èª²é¡Œ\næ±ºå®šäº‹é …ï¼šç¶­æŒç®¡ç†ã‚³ã‚¹ãƒˆã€è€æœ½åŒ–ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ©Ÿèƒ½å–ªå¤±ãŒä¸»è¦èª²é¡Œã€‚' }
        ];

        const defaultUserMessages = [
            { id: 'msg1', sender: 'xxxx', email: 'yamada@example.com', message: 'å»ƒæ ¡æ´»ç”¨ã«ã¤ã„ã¦è³ªå•ãŒã‚ã‚Šã¾ã™ã€‚å…·ä½“çš„ãªæ”¯æ´ç­–ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ' },
            { id: 'msg2', sender: 'xxxx', email: 'sato@example.com', message: 'åœ°åŸŸã®ã‚¤ãƒ™ãƒ³ãƒˆé–‹å‚¬ã«å»ƒæ ¡ã‚’åˆ©ç”¨ã—ãŸã„ã®ã§ã™ãŒã€æ‰‹ç¶šãã‚’æ•™ãˆã¦ãã ã•ã„ã€‚' },
            { id: 'msg3', sender: 'xxxx', email: 'tanaka@example.com', message: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é€²æ—çŠ¶æ³ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚' }
        ];

        // æ–°ã—ãè¿½åŠ ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿
        const defaultSystemAlerts = [
            { id: 'alert1', message: '[2025/07/07 10:30] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Œäº†' },
            { id: 'alert2', message: '[2025/07/06 18:00] ã‚µã‚¤ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹ã‚’æ¤œçŸ¥' },
            { id: 'alert3', message: '[2025/07/05 09:00] æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒªãƒªãƒ¼ã‚¹æº–å‚™å®Œäº†' }
        ];


        function initializeContent() {
            if (!localStorage.getItem('mainContentData')) {
                localStorage.setItem('mainContentData', JSON.stringify(defaultContent));
            }
            if (!localStorage.getItem('ideasData')) {
                localStorage.setItem('ideasData', JSON.stringify(defaultIdeas));
            }
            if (!localStorage.getItem('teamMembersData')) {
                localStorage.setItem('teamMembersData', JSON.stringify(defaultTeamMembers));
            }
            if (!localStorage.getItem('meetingMinutesData')) {
                localStorage.setItem('meetingMinutesData', JSON.stringify(defaultMeetingMinutes));
            }
            if (!localStorage.getItem('userMessagesData')) {
                localStorage.setItem('userMessagesData', JSON.stringify(defaultUserMessages));
            }
            // ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’åˆæœŸåŒ–
            if (!localStorage.getItem('systemAlertsData')) {
                localStorage.setItem('systemAlertsData', JSON.stringify(defaultSystemAlerts));
            }
        }

        function loadSiteContent() {
            const storedContent = JSON.parse(localStorage.getItem('mainContentData'));
            const storedIdeas = JSON.parse(localStorage.getItem('ideasData'));
            const storedTeamMembers = JSON.parse(localStorage.getItem('teamMembersData'));

            // footerTextContainerã®å–å¾—ã‚’ã“ã“ã§è¡Œã†
            const footerTextContainer = document.querySelector('footer'); 

            document.querySelector('header h1').textContent = storedContent.siteTitle;
            document.querySelector('header p.subtitle').textContent = "Eradication Plan for Closed Schools";
            document.querySelector('header p:not(.subtitle)').textContent = storedContent.welcomeMessage;
            document.title = storedContent.siteTitle;
            // footerTextContainerãŒnullã§ãªã„ã“ã¨ã‚’ç¢ºèªã—ã¦ã‹ã‚‰textContentã‚’è¨­å®š
            if (footerTextContainer) {
                footerTextContainer.textContent = storedContent.footerText;
            }

            missionContentContainer.innerHTML = storedContent.mission;
            challengesContentContainer.innerHTML = storedContent.challenges;
            usageIntroContainer.innerHTML = `<p class="mb-6">${storedContent.usageIntro}</p>`;
            examplesIntroContainer.innerHTML = `<p class="mb-6">${storedContent.examplesIntro}</p>`;
            naganoDetailsContentContainer.innerHTML = storedContent.naganoDetails;
            teamContentContainer.innerHTML = `<p class="mb-6">${storedContent.teamContent}</p>`;


            usageIdeasContainer.innerHTML = '';
            examplesIdeasContainer.innerHTML = '';
            let ideaDelay = 2;
            storedIdeas.forEach(idea => {
                const ideaDiv = document.createElement('div');
                ideaDiv.className = `idea animated-item delay-${ideaDelay % 4 + 1}`;
                ideaDiv.innerHTML = `<h3>${idea.title}</h3><p>${idea.description}</p>`;
                if (idea.type === 'usage') {
                    usageIdeasContainer.appendChild(ideaDiv);
                } else if (idea.type === 'examples') {
                    examplesIdeasContainer.appendChild(ideaDiv);
                }
                ideaDelay++;
            });

            teamMembersContainer.innerHTML = '';
            let memberDelay = 2;
            storedTeamMembers.forEach(member => {
                const memberDiv = document.createElement('div');
                memberDiv.className = `member animated-item delay-${memberDelay % 2 + 1}`;
                memberDiv.innerHTML = `<h4>${member.name}</h4><p>${member.role}</p>`;
                teamMembersContainer.appendChild(memberDiv);
                memberDelay++;
            });
        }

        function loadAdminContent() {
            const savedTopic = localStorage.getItem("adminDiscussionTopic");
            const savedNotes = localStorage.getItem("adminDiscussionNotes");
            const savedPoints = JSON.parse(localStorage.getItem("adminDiscussionPoints")) || [];
            const storedContent = JSON.parse(localStorage.getItem('mainContentData'));
            const storedIdeas = JSON.parse(localStorage.getItem('ideasData'));
            const storedTeamMembers = JSON.parse(localStorage.getItem('teamMembersData'));
            const storedMeetingMinutes = JSON.parse(localStorage.getItem('meetingMinutesData'));
            const storedUserMessages = JSON.parse(localStorage.getItem('userMessagesData'));
            const storedSystemAlerts = JSON.parse(localStorage.getItem('systemAlertsData')); // ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—


            if (savedTopic) discussionTopicInput.value = savedTopic;
            if (savedNotes) adminTextarea.value = savedNotes;
            renderDiscussionPoints(savedPoints);
            renderMeetingMinutes(storedMeetingMinutes);
            renderUserMessages(storedUserMessages);
            renderSystemAlerts(storedSystemAlerts); // ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

            missionTextEditor.value = storedContent.mission;
            challengesTextEditor.value = storedContent.challenges;
            usageIntroEditor.value = storedContent.usageIntro;
            examplesIntroEditor.value = storedContent.examplesIntro;
            naganoDetailsEditor.value = storedContent.naganoDetails;
            teamContentEditor.value = storedContent.teamContent;
            footerTextEditor.value = storedContent.footerText;

            siteTitleInput.value = storedContent.siteTitle;
            welcomeMessageInput.value = storedContent.welcomeMessage;
            renderUserList(JSON.parse(localStorage.getItem("adminUsers")) || ["ãƒ¦ãƒ¼ã‚¶ãƒ¼A", "ãƒ¦ãƒ¼ã‚¶ãƒ¼B", "ãƒ¦ãƒ¼ã‚¶ãƒ¼C"]);
            
            mfaStatusSpan.textContent = localStorage.getItem("mfaEnabled") === "true" ? "æœ‰åŠ¹" : "ç„¡åŠ¹";
            activeSessionsSpan.textContent = localStorage.getItem("activeSessions") || "1";
            recentLogCode.textContent = localStorage.getItem("recentLog") || "ãƒ­ã‚°ãŒã‚ã‚Šã¾ã›ã‚“";
            currentApiKeySpan.textContent = localStorage.getItem("apiKey") || "********";

            // Analytics dummy data
            monthlyVisitorsSpan.textContent = localStorage.getItem("monthlyVisitors") || "12,345";
            pageViewsSpan.textContent = localStorage.getItem("pageViews") || "56,789";
            avgTimeSpan.textContent = localStorage.getItem("avgTime") || "3åˆ†45ç§’";
            contactSubmissionsSpan.textContent = localStorage.getItem("contactSubmissions") || "128";
            mostViewedSectionSpan.textContent = localStorage.getItem("mostViewedSection") || "å»ƒæ ¡ã®å¤šæ§˜ãªæ´»ç”¨æ¡ˆ";

            // Notification settings
            emailNotificationsCheckbox.checked = localStorage.getItem("emailNotifications") === "true";
            smsNotificationsCheckbox.checked = localStorage.getItem("smsNotifications") === "true";

            // ã‚¿ãƒ–ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ¶å¾¡
            if (isAdvancedAdmin) {
                analyticsTabBtn.style.display = 'block';
                notificationsTabBtn.style.display = 'block';
                advancedTabBtn.style.display = 'block';
            } else {
                analyticsTabBtn.style.display = 'none';
                notificationsTabBtn.style.display = 'none';
                advancedTabBtn.style.display = 'none';
                tabAnalyticsPane.classList.remove('active'); // éè¡¨ç¤ºã«ã™ã‚‹éš›ã¯activeã‚¯ãƒ©ã‚¹ã‚‚å‰Šé™¤
                tabNotificationsPane.classList.remove('active'); // éè¡¨ç¤ºã«ã™ã‚‹éš›ã¯activeã‚¯ãƒ©ã‚¹ã‚‚å‰Šé™¤
                tabAdvancedPane.classList.remove('active'); // éè¡¨ç¤ºã«ã™ã‚‹éš›ã¯activeã‚¯ãƒ©ã‚¹ã‚‚å‰Šé™¤
                
                // éé«˜åº¦ç®¡ç†è€…ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸå ´åˆã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
                const contentTabButton = document.querySelector('.admin-tab-btn[data-tab="content"]');
                if (!contentTabButton.classList.contains('active')) {
                    contentTabButton.click();
                }
            }

            renderIdeaManagementLists(storedIdeas);
            renderTeamMembersList(storedTeamMembers);
        }

        function renderDiscussionPoints(points) {
            discussionPointsList.innerHTML = "";
            points.forEach((point, index) => {
                const li = document.createElement("li");
                li.innerHTML = `<span>${point}</span><button data-index="${index}" aria-label="ã“ã®è­°è«–ãƒã‚¤ãƒ³ãƒˆã‚’å‰Šé™¤">&times;</button>`;
                discussionPointsList.appendChild(li);
            });
        }

        function renderUserList(users) {
            userList.innerHTML = "";
            users.forEach((user, index) => {
                const li = document.createElement("li");
                li.innerHTML = `<span>${user}</span><button class="delete-user-btn" data-index="${index}" aria-label="ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤">&times;</button>`;
                userList.appendChild(li);
            });
        }

        function renderIdeaManagementLists(ideas) {
            usageIdeasListAdmin.innerHTML = '';
            examplesIdeasListAdmin.innerHTML = '';
            ideas.forEach(idea => {
                const li = document.createElement('li');
                li.innerHTML = `<span>${idea.title}</span><div><button class="edit-idea-btn" data-id="${idea.id}" data-type="${idea.type}">ç·¨é›†</button><button class="delete-idea-btn" data-id="${idea.id}" data-type="${idea.type}">å‰Šé™¤</button></div>`;
                if (idea.type === 'usage') {
                    usageIdeasListAdmin.appendChild(li);
                } else if (idea.type === 'examples') {
                    examplesIdeasListAdmin.appendChild(li);
                }
            });
        }

        function renderTeamMembersList(members) {
            teamMembersListAdmin.innerHTML = '';
            members.forEach(member => {
                const li = document.createElement('li');
                li.innerHTML = `<span>${member.name} - ${member.role.substring(0, 30)}...</span><div><button class="edit-member-btn" data-id="${member.id}">ç·¨é›†</button><button class="delete-member-btn" data-id="${member.id}">å‰Šé™¤</button></div>`;
                teamMembersListAdmin.appendChild(li);
            });
        }

        function renderMeetingMinutes(minutes) {
            meetingMinutesListAdmin.innerHTML = '';
            minutes.forEach(minute => {
                const li = document.createElement('li');
                li.innerHTML = `<span>${minute.title}</span><div><button class="edit-minutes-btn" data-id="${minute.id}">ç·¨é›†</button><button class="delete-minutes-btn" data-id="${minute.id}">å‰Šé™¤</button></div>`;
                meetingMinutesListAdmin.appendChild(li);
            });
        }

        function renderUserMessages(messages) {
            userMessagesList.innerHTML = '';
            messages.forEach(msg => {
                const li = document.createElement('li');
                li.innerHTML = `<span>[${msg.sender}] ${msg.message.substring(0, 40)}...</span><button class="delete-message-btn" data-id="${msg.id}">å‰Šé™¤</button>`;
                userMessagesList.appendChild(li);
            });
        }

        // æ–°ã—ã„é–¢æ•°: ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        function renderSystemAlerts(alerts) {
            systemAlertsList.innerHTML = '';
            alerts.forEach(alert => {
                const li = document.createElement('li');
                li.innerHTML = `<span>${alert.message}</span><button class="delete-alert-btn" data-id="${alert.id}">å‰Šé™¤</button>`;
                systemAlertsList.appendChild(li);
            });
        }
        
        setupListSearch(discussionPointSearch, discussionPointsList);
        setupListSearch(userSearchInput, userList);

        function showEditIdeaModal(id, type, title, description) {
            const modalHtml = `<div style="text-align: left; width: 100%;"><h4 class="text-xl font-semibold mb-4 text-blue-200" style="text-align: center;">ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ç·¨é›†</h4><label for="edit-idea-title" class="block mb-2 text-blue-200">ã‚¿ã‚¤ãƒˆãƒ«:</label><input type="text" id="edit-idea-title" class="w-full p-3 rounded-md bg-gray-800 text-white border border-gray-600 mb-4" value="${title}"><label for="edit-idea-description" class="block mb-2 text-blue-200">èª¬æ˜:</label><textarea id="edit-idea-description" class="editable-content-textarea" style="min-height: 120px;" rows="5">${description}</textarea></div>`;
            showConfirm(modalHtml, (result) => {
                if (result) {
                    const editedTitle = document.getElementById('edit-idea-title').value;
                    const editedDescription = document.getElementById('edit-idea-description').value;
                    let ideas = JSON.parse(localStorage.getItem('ideasData'));
                    const ideaIndex = ideas.findIndex(idea => idea.id === id && idea.type === type);
                    if (ideaIndex !== -1) {
                        ideas[ideaIndex] = { id, type, title: editedTitle, description: editedDescription };
                        localStorage.setItem('ideasData', JSON.stringify(ideas));
                        showAlert('ã‚¢ã‚¤ãƒ‡ã‚¢ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸï¼');
                        loadSiteContent();
                        loadAdminContent();
                    }
                }
            });
        }

        function showEditMemberModal(id, name, role) {
            const modalHtml = `<div style="text-align: left; width: 100%;"><h4 class="text-xl font-semibold mb-4 text-blue-200" style="text-align: center;">ãƒ¡ãƒ³ãƒãƒ¼ã‚’ç·¨é›†</h4><label for="edit-member-name" class="block mb-2 text-blue-200">åå‰:</label><input type="text" id="edit-member-name" class="w-full p-3 rounded-md bg-gray-800 text-white border border-gray-600 mb-4" value="${name}"><label for="edit-member-role" class="block mb-2 text-blue-200">å½¹å‰²ã¨èª¬æ˜:</label><textarea id="edit-member-role" class="editable-content-textarea" style="min-height: 120px;" rows="5">${role}</textarea></div>`;
            showConfirm(modalHtml, (result) => {
                if (result) {
                    const editedName = document.getElementById('edit-member-name').value;
                    const editedRole = document.getElementById('edit-member-role').value;
                    let members = JSON.parse(localStorage.getItem('teamMembersData'));
                    const memberIndex = members.findIndex(member => member.id === id);
                    if (memberIndex !== -1) {
                        members[memberIndex] = { id, name: editedName, role: editedRole };
                        localStorage.setItem('teamMembersData', JSON.stringify(members));
                        showAlert('ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸï¼');
                        loadSiteContent();
                        loadAdminContent();
                    }
                }
            });
        }

        function showEditMeetingMinutesModal(id, title, content) {
            const modalHtml = `<div style="text-align: left; width: 100%;"><h4 class="text-xl font-semibold mb-4 text-blue-200" style="text-align: center;">è­°äº‹éŒ²ã‚’ç·¨é›†</h4><label for="edit-minutes-title" class="block mb-2 text-blue-200">ã‚¿ã‚¤ãƒˆãƒ«:</label><input type="text" id="edit-minutes-title" class="w-full p-3 rounded-md bg-gray-800 text-white border border-gray-600 mb-4" value="${title}"><label for="edit-minutes-content" class="block mb-2 text-blue-200">å†…å®¹:</label><textarea id="edit-minutes-content" class="editable-content-textarea" style="min-height: 180px;" rows="8">${content}</textarea></div>`;
            showConfirm(modalHtml, (result) => {
                if (result) {
                    const editedTitle = document.getElementById('edit-minutes-title').value;
                    const editedContent = document.getElementById('edit-minutes-content').value;
                    let minutes = JSON.parse(localStorage.getItem('meetingMinutesData'));
                    const minutesIndex = minutes.findIndex(m => m.id === id);
                    if (minutesIndex !== -1) {
                        minutes[minutesIndex] = { id, title: editedTitle, content: editedContent };
                        localStorage.setItem('meetingMinutesData', JSON.stringify(minutes));
                        showAlert('è­°äº‹éŒ²ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸï¼');
                        loadAdminContent();
                    }
                }
            });
        }
        
        function handleIdeaListClick(e) {
            const button = e.target.closest('button');
            if (!button) return;

            if (button.classList.contains('edit-idea-btn')) {
                const id = button.dataset.id;
                const type = button.dataset.type;
                const ideas = JSON.parse(localStorage.getItem('ideasData'));
                const ideaToEdit = ideas.find(idea => idea.id === id && idea.type === type);
                if (ideaToEdit) {
                    showEditIdeaModal(ideaToEdit.id, ideaToEdit.type, ideaToEdit.title, ideaToEdit.description);
                }
            } else if (button.classList.contains('delete-idea-btn')) {
                const id = button.dataset.id;
                const type = button.dataset.type;
                showConfirm('ã“ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ', (result) => {
                    if (result) {
                        let ideas = JSON.parse(localStorage.getItem('ideasData'));
                        ideas = ideas.filter(idea => !(idea.id === id && idea.type === type));
                        localStorage.setItem('ideasData', JSON.stringify(ideas));
                        showAlert('ã‚¢ã‚¤ãƒ‡ã‚¢ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼');
                        loadSiteContent();
                        loadAdminContent();
                    }
                });
            }
        }

        function handleTeamMemberListClick(e) {
            const button = e.target.closest('button');
            if (!button) return;

            if (button.classList.contains('edit-member-btn')) {
                const id = button.dataset.id;
                const members = JSON.parse(localStorage.getItem('teamMembersData'));
                const memberToEdit = members.find(member => member.id === id);
                if (memberToEdit) {
                    showEditMemberModal(memberToEdit.id, memberToEdit.name, memberToEdit.role);
                }
            } else if (button.classList.contains('delete-member-btn')) {
                const id = button.dataset.id;
                showConfirm('ã“ã®ãƒ¡ãƒ³ãƒãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ', (result) => {
                    if (result) {
                        let members = JSON.parse(localStorage.getItem('teamMembersData'));
                        members = members.filter(member => member.id !== id);
                        localStorage.setItem('teamMembersData', JSON.stringify(members));
                        showAlert('ãƒ¡ãƒ³ãƒãƒ¼ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼');
                        loadSiteContent();
                        loadAdminContent();
                    }
                });
            }
        }

        function handleMeetingMinutesListClick(e) {
            const button = e.target.closest('button');
            if (!button) return;

            if (button.classList.contains('edit-minutes-btn')) {
                const id = button.dataset.id;
                const minutes = JSON.parse(localStorage.getItem('meetingMinutesData'));
                const minuteToEdit = minutes.find(m => m.id === id);
                if (minuteToEdit) {
                    showEditMeetingMinutesModal(minuteToEdit.id, minuteToEdit.title, minuteToEdit.content);
                }
            } else if (button.classList.contains('delete-minutes-btn')) {
                const id = button.dataset.id;
                showConfirm('ã“ã®è­°äº‹éŒ²ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ', (result) => {
                    if (result) {
                        let minutes = JSON.parse(localStorage.getItem('meetingMinutesData'));
                        minutes = minutes.filter(m => m.id !== id);
                        localStorage.setItem('meetingMinutesData', JSON.stringify(minutes));
                        showAlert('è­°äº‹éŒ²ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼');
                        loadAdminContent();
                    }
                });
            }
        }

        function handleUserMessageListClick(e) {
            const button = e.target.closest('.delete-message-btn');
            if (!button) return;

            const id = button.dataset.id;
            showConfirm('ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ', (result) => {
                if (result) {
                    let messages = JSON.parse(localStorage.getItem('userMessagesData'));
                    messages = messages.filter(msg => msg.id !== id);
                    localStorage.setItem('userMessagesData', JSON.stringify(messages));
                    showAlert('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼');
                    loadAdminContent();
                }
            });
        }

        // æ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼: ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã®å‰Šé™¤
        systemAlertsList.addEventListener('click', (e) => {
            const button = e.target.closest('.delete-alert-btn');
            if (!button) return;

            const id = button.dataset.id;
            showConfirm('ã“ã®ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ', (result) => {
                if (result) {
                    let alerts = JSON.parse(localStorage.getItem('systemAlertsData'));
                    alerts = alerts.filter(alert => alert.id !== id);
                    localStorage.setItem('systemAlertsData', JSON.stringify(alerts));
                    showAlert('ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼');
                    loadAdminContent();
                }
            });
        });
        
        usageIdeasListAdmin.addEventListener('click', handleIdeaListClick);
        examplesIdeasListAdmin.addEventListener('click', handleIdeaListClick);
        teamMembersListAdmin.addEventListener('click', handleTeamMemberListClick);
        meetingMinutesListAdmin.addEventListener('click', handleMeetingMinutesListClick);
        userMessagesList.addEventListener('click', handleUserMessageListClick);


        function openAdminPanel(e) {
            e.preventDefault();
            mainContent.style.display = "none";
            adminSection.style.display = "flex";
            adminPasswordContainer.style.display = "block";
            adminContent.style.display = "none";
            adminPasswordInput.value = "";
            adminMessage.style.display = "none";
            adminPasswordInput.focus();
            loadAdminContent(); // ã“ã“ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒ­ãƒ¼ãƒ‰ã—ã€ã‚¿ãƒ–ã®è¡¨ç¤ºçŠ¶æ…‹ã‚’æ›´æ–°
        }

        adminLink.addEventListener("click", openAdminPanel);
        adminLinkMobile.addEventListener("click", (e) => {
            closeMobileMenu();
            openAdminPanel(e);
        });

        adminLoginBtn.addEventListener("click", () => {
            showLoading(adminLoginBtn);
            setTimeout(() => {
                const enteredPassword = adminPasswordInput.value.trim();
                if (enteredPassword === atob(P_A) || enteredPassword === atob(P_ADV)) {
                    isAdvancedAdmin = (enteredPassword === atob(P_ADV));
                    adminPasswordContainer.style.display = "none";
                    adminContent.style.display = "flex";
                    adminMessage.style.display = "none";
                    
                    if (isAdvancedAdmin) {
                        adminSection.classList.add("advanced-admin");
                        showAlert("é«˜åº¦ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸã€‚");
                        // é«˜åº¦ç®¡ç†è€…ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸå ´åˆã€åˆ†æã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
                        document.querySelector('.admin-tab-btn[data-tab="analytics"]').click(); 
                    } else {
                        adminSection.classList.remove("advanced-admin");
                        showAlert("ç®¡ç†è€…ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã—ãŸã€‚");
                        // é€šå¸¸ç®¡ç†è€…ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸå ´åˆã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
                        document.querySelector('.admin-tab-btn[data-tab="content"]').click(); 
                    }
                    loadAdminContent(); // ãƒ‡ãƒ¼ã‚¿ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€ãƒœã‚¿ãƒ³ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
                } else {
                    adminMessage.style.display = "block";
                }
                hideLoading(adminLoginBtn);
            }, 1000);
        });

        adminPasswordInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter") {
                e.preventDefault();
                adminLoginBtn.click();
            }
        });

        adminBackBtn.addEventListener("click", () => {
            adminSection.style.display = "none";
            mainContent.style.display = "block";
            isAdvancedAdmin = false;
            document.getElementById("mission").scrollIntoView({ behavior: 'smooth' });
            loadSiteContent();
        });
        
        adminTabs.addEventListener('click', (e) => {
            if (e.target.matches('.admin-tab-btn')) {
                const tab = e.target.dataset.tab;
                
                adminTabs.querySelectorAll('.admin-tab-btn').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
                
                adminTabPanes.forEach(pane => {
                    pane.classList.remove('active');
                    if (pane.id === `tab-${tab}`) {
                        pane.classList.add('active');
                    }
                });
            }
        });

        saveNotesBtn.addEventListener("click", () => {
            localStorage.setItem("adminDiscussionTopic", discussionTopicInput.value);
            localStorage.setItem("adminDiscussionNotes", adminTextarea.value);
            showAlert("ãƒ¡ãƒ¢ã¨ãƒ†ãƒ¼ãƒãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼");
            flashSave(saveNotesBtn.closest('.admin-feature-block'));
        });

        clearNotesBtn.addEventListener("click", () => {
            showConfirm("ãƒ¡ãƒ¢ã¨ãƒ†ãƒ¼ãƒã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ", (result) => {
                if (result) {
                    discussionTopicInput.value = "";
                    adminTextarea.value = "";
                    localStorage.removeItem("adminDiscussionTopic");
                    localStorage.removeItem("adminDiscussionNotes");
                    showAlert("ãƒ¡ãƒ¢ã¨ãƒ†ãƒ¼ãƒãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸã€‚");
                }
            });
        });

        addPointBtn.addEventListener("click", () => {
            const pointText = discussionPointInput.value.trim();
            if (pointText) {
                let savedPoints = JSON.parse(localStorage.getItem("adminDiscussionPoints")) || [];
                savedPoints.push(pointText);
                localStorage.setItem("adminDiscussionPoints", JSON.stringify(savedPoints));
                discussionPointInput.value = "";
                renderDiscussionPoints(savedPoints);
            } else {
                showAlert("è­°è«–ãƒã‚¤ãƒ³ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
            }
        });

        discussionPointsList.addEventListener("click", (e) => {
            if (e.target.tagName === "BUTTON" && e.target.hasAttribute("data-index")) {
                showConfirm("ã“ã®è­°è«–ãƒã‚¤ãƒ³ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ", (result) => {
                    if (result) {
                        const indexToRemove = parseInt(e.target.dataset.index);
                        let savedPoints = JSON.parse(localStorage.getItem("adminDiscussionPoints")) || [];
                        savedPoints.splice(indexToRemove, 1);
                        localStorage.setItem("adminDiscussionPoints", JSON.stringify(savedPoints));
                        renderDiscussionPoints(savedPoints);
                        showAlert("è­°è«–ãƒã‚¤ãƒ³ãƒˆãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚");
                    }
                });
            }
        });

        clearPointsBtn.addEventListener("click", () => {
            showConfirm("å…¨ã¦ã®è­°è«–ãƒã‚¤ãƒ³ãƒˆã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ", (result) => {
                if (result) {
                    localStorage.removeItem("adminDiscussionPoints");
                    renderDiscussionPoints([]);
                    showAlert("å…¨ã¦ã®è­°è«–ãƒã‚¤ãƒ³ãƒˆãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸã€‚");
                }
            });
        });

        addMeetingMinutesBtn.addEventListener('click', () => {
            const title = meetingMinutesTitleInput.value.trim();
            const content = meetingMinutesContentTextarea.value.trim();
            if (title && content) {
                let minutes = JSON.parse(localStorage.getItem('meetingMinutesData'));
                const newId = 'm' + Date.now();
                minutes.push({ id: newId, title, content });
                localStorage.setItem('meetingMinutesData', JSON.stringify(minutes));
                showAlert('æ–°ã—ã„è­°äº‹éŒ²ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼');
                meetingMinutesTitleInput.value = '';
                meetingMinutesContentTextarea.value = '';
                loadAdminContent();
            } else {
                showAlert('è­°äº‹éŒ²ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨å†…å®¹ã®ä¸¡æ–¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
            }
        });

        saveMainContentBtn.addEventListener('click', () => {
            const currentContent = JSON.parse(localStorage.getItem('mainContentData'));
            currentContent.mission = missionTextEditor.value;
            currentContent.challenges = challengesTextEditor.value;
            currentContent.usageIntro = usageIntroEditor.value;
            currentContent.examplesIntro = examplesIntroEditor.value;
            currentContent.naganoDetails = naganoDetailsEditor.value;
            currentContent.teamContent = teamContentEditor.value;
            currentContent.footerText = footerTextEditor.value;
            localStorage.setItem('mainContentData', JSON.stringify(currentContent));
            showAlert('ä¸»è¦ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼');
            flashSave(saveMainContentBtn.closest('.admin-feature-block'));
            loadSiteContent();
        });

        addUsageIdeaBtn.addEventListener('click', () => {
            const title = newUsageIdeaTitleInput.value.trim();
            const description = newUsageIdeaDescriptionInput.value.trim();
            if (title && description) {
                let ideas = JSON.parse(localStorage.getItem('ideasData'));
                const newId = 'u' + Date.now();
                ideas.push({ id: newId, type: 'usage', title, description });
                localStorage.setItem('ideasData', JSON.stringify(ideas));
                showAlert('æ–°ã—ã„æ´»ç”¨æ¡ˆãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼');
                newUsageIdeaTitleInput.value = '';
                newUsageIdeaDescriptionInput.value = '';
                loadSiteContent();
                loadAdminContent();
            } else {
                showAlert('ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã®ä¸¡æ–¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
            }
        });

        addExampleIdeaBtn.addEventListener('click', () => {
            const title = newExampleIdeaTitleInput.value.trim();
            const description = newExampleIdeaDescriptionInput.value.trim();
            if (title && description) {
                let ideas = JSON.parse(localStorage.getItem('ideasData'));
                const newId = 'e' + Date.now();
                ideas.push({ id: newId, type: 'examples', title, description });
                localStorage.setItem('ideasData', JSON.stringify(ideas));
                showAlert('æ–°ã—ã„æ´»ç”¨äº‹ä¾‹ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼');
                newExampleIdeaTitleInput.value = '';
                newExampleIdeaDescriptionInput.value = '';
                loadSiteContent();
                loadAdminContent();
            } else {
                showAlert('ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã®ä¸¡æ–¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
            }
        });

        addMemberBtn.addEventListener('click', () => {
            const name = newMemberNameInput.value.trim();
            const role = newMemberRoleInput.value.trim();
            if (name && role) {
                let members = JSON.parse(localStorage.getItem('teamMembersData'));
                const newId = 't' + Date.now();
                members.push({ id: newId, name, role });
                localStorage.setItem('teamMembersData', JSON.stringify(members));
                showAlert('æ–°ã—ã„ãƒ¡ãƒ³ãƒãƒ¼ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼');
                newMemberNameInput.value = '';
                newMemberRoleInput.value = '';
                loadSiteContent();
                loadAdminContent();
            } else {
                showAlert('åå‰ã¨å½¹å‰²ã®ä¸¡æ–¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
            }
        });

        updateSiteSettingsBtn.addEventListener("click", () => {
            const currentContent = JSON.parse(localStorage.getItem('mainContentData'));
            currentContent.siteTitle = siteTitleInput.value;
            currentContent.welcomeMessage = welcomeMessageInput.value;
            localStorage.setItem("mainContentData", JSON.stringify(currentContent));
            showAlert("ã‚µã‚¤ãƒˆè¨­å®šãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸï¼");
            loadSiteContent();
        });

        addUserBtn.addEventListener("click", () => {
            const userName = userNameInput.value.trim();
            if (userName) {
                let users = JSON.parse(localStorage.getItem("adminUsers")) || [];
                users.push(userName);
                localStorage.setItem("adminUsers", JSON.stringify(users));
                renderUserList(users);
                userNameInput.value = "";
                showAlert(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€Œ${userName}ã€ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼`);
            } else {
                showAlert("ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
            }
        });

        userList.addEventListener("click", (e) => {
            if (e.target.classList.contains("delete-user-btn")) {
                showConfirm("ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ", (result) => {
                    if (result) {
                        const indexToRemove = parseInt(e.target.dataset.index);
                        let users = JSON.parse(localStorage.getItem("adminUsers")) || [];
                        const userName = users[indexToRemove];
                        users.splice(indexToRemove, 1);
                        localStorage.setItem("adminUsers", JSON.stringify(users));
                        renderUserList(users);
                        showAlert(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€Œ${userName}ã€ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼`);
                    }
                });
            }
        });

        enableMfaBtn.addEventListener("click", () => {
            showConfirm("äºŒè¦ç´ èªè¨¼ã‚’æœ‰åŠ¹ã«ã—ã¾ã™ã‹ï¼Ÿ", (result) => {
                if (result) {
                    localStorage.setItem("mfaEnabled", "true");
                    mfaStatusSpan.textContent = "æœ‰åŠ¹";
                    showAlert("äºŒè¦ç´ èªè¨¼ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸã€‚");
                }
            });
        });

        terminateSessionBtn.addEventListener("click", () => {
            showConfirm("å…¨ã¦ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã—ã¾ã™ã‹ï¼Ÿ", (result) => {
                if (result) {
                    localStorage.setItem("activeSessions", "1");
                    activeSessionsSpan.textContent = "1";
                    showAlert("å…¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒçµ‚äº†ã•ã‚Œã¾ã—ãŸã€‚");
                }
            });
        });

        viewLogBtn.addEventListener("click", () => {
            const dummyLog = `[${new Date().toLocaleString()}] User 'admin' logged in.`;
            localStorage.setItem("recentLog", dummyLog);
            recentLogCode.textContent = dummyLog;
            showAlert("æœ€æ–°ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ­ã‚°ã‚’è¡¨ç¤ºã—ã¾ã—ãŸã€‚");
        });

        generateApiKeyBtn.addEventListener('click', () => {
            const newKey = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
            localStorage.setItem("apiKey", newKey);
            currentApiKeySpan.textContent = newKey;
            showAlert("æ–°ã—ã„APIã‚­ãƒ¼ãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸï¼");
        });

        createBackupBtn.addEventListener('click', () => {
            showLoading(createBackupBtn);
            setTimeout(() => {
                showAlert("ã‚µã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãŒä½œæˆã•ã‚Œã¾ã—ãŸï¼");
                hideLoading(createBackupBtn);
            }, 1500);
        });

        restoreBackupBtn.addEventListener('click', () => {
            showConfirm("æœ¬å½“ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒã—ã¾ã™ã‹ï¼Ÿç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚", (result) => {
                if (result) {
                    showLoading(restoreBackupBtn);
                    setTimeout(() => {
                        showAlert("ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãŒå¾©å…ƒã•ã‚Œã¾ã—ãŸï¼ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰");
                        // ã“ã“ã§å®Ÿéš›ã®å¾©å…ƒãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒ€ãƒŸãƒ¼ï¼‰
                        loadSiteContent();
                        loadAdminContent();
                        hideLoading(restoreBackupBtn);
                    }, 2000);
                }
            });
        });

        refreshAnalyticsBtn.addEventListener('click', () => {
            showLoading(refreshAnalyticsBtn);
            setTimeout(() => {
                // ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–°
                localStorage.setItem("monthlyVisitors", (Math.floor(Math.random() * 10000) + 5000).toLocaleString());
                localStorage.setItem("pageViews", (Math.floor(Math.random() * 50000) + 20000).toLocaleString());
                localStorage.setItem("avgTime", `${Math.floor(Math.random() * 5) + 2}åˆ†${Math.floor(Math.random() * 60)}ç§’`);
                const sections = ["ç§ãŸã¡ã®æƒ³ã„", "å»ƒæ ¡ã®å¤šæ§˜ãªæ´»ç”¨æ¡ˆ", "é•·é‡ã®é­…åŠ›ã¨åœ°åŸŸæ€§", "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ¡ãƒ³ãƒãƒ¼"];
                localStorage.setItem("mostViewedSection", sections[Math.floor(Math.random() * sections.length)]);
                
                loadAdminContent(); // æ›´æ–°ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å†è¡¨ç¤º
                showAlert("åˆ†æãƒ‡ãƒ¼ã‚¿ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸï¼");
                hideLoading(refreshAnalyticsBtn);
            }, 1000);
        });

        clearAlertsBtn.addEventListener('click', () => {
            showConfirm("å…¨ã¦ã®ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ", (result) => {
                if (result) {
                    localStorage.removeItem("systemAlertsData"); // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ã‚‚å‰Šé™¤
                    renderSystemAlerts([]); // è¡¨ç¤ºã‚’ã‚¯ãƒªã‚¢
                    showAlert("ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸã€‚");
                }
            });
        });

        loadMoreMessagesBtn.addEventListener('click', () => {
            showLoading(loadMoreMessagesBtn);
            setTimeout(() => {
                const newMessages = [
                    { id: 'msg' + Date.now(), sender: 'xxxx', email: 'suzuki@example.com', message: 'å»ƒæ ¡ã®æ´»ç”¨äº‹ä¾‹ã«ã¤ã„ã¦ã‚‚ã£ã¨çŸ¥ã‚ŠãŸã„ã§ã™ã€‚' },
                    { id: 'msg' + (Date.now() + 1), sender: 'xxxx', email: 'takahashi@example.com', message: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®å‚åŠ æ–¹æ³•ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚' }
                ];
                let currentMessages = JSON.parse(localStorage.getItem('userMessagesData')) || [];
                currentMessages = currentMessages.concat(newMessages);
                localStorage.setItem('userMessagesData', JSON.stringify(currentMessages));
                loadAdminContent();
                showAlert("æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸã€‚");
                hideLoading(loadMoreMessagesBtn);
            }, 1000);
        });

        saveNotificationSettingsBtn.addEventListener('click', () => {
            localStorage.setItem("emailNotifications", emailNotificationsCheckbox.checked);
            localStorage.setItem("smsNotifications", smsNotificationsCheckbox.checked);
            showAlert("é€šçŸ¥è¨­å®šãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼");
        });


        const contactForm = document.getElementById('contact-form');
        const formMessage = document.getElementById('form-message');

        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            showLoading(contactSubmitBtn);
            setTimeout(() => {
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const message = document.getElementById('message').value;

                if (!name || !email || !message) {
                    formMessage.style.display = 'block';
                    formMessage.style.color = '#ef4444';
                    formMessage.textContent = 'å…¨ã¦ã®å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                } else {
                    // Save message to localStorage for admin panel
                    let userMessages = JSON.parse(localStorage.getItem('userMessagesData')) || [];
                    const newMessage = {
                        id: 'msg' + Date.now(),
                        sender: name, // Use the actual name from the form
                        email: email,
                        message: message
                    };
                    userMessages.push(newMessage);
                    localStorage.setItem('userMessagesData', JSON.stringify(userMessages));

                    formMessage.style.display = 'block';
                    formMessage.style.color = '#a7f3d0';
                    formMessage.textContent = 'ãŠå•ã„åˆã‚ã›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚';
                    contactForm.reset();
                    // Update contact submissions count
                    let submissions = parseInt(localStorage.getItem("contactSubmissions") || "0");
                    localStorage.setItem("contactSubmissions", submissions + 1);
                }
                hideLoading(contactSubmitBtn);
            }, 1500);
        });

        document.querySelectorAll('#contact-form input, #contact-form textarea').forEach(input => {
            input.addEventListener('input', () => {
                formMessage.style.display = 'none';
            });
        });

        const scrollToTopBtn = document.getElementById("scrollToTopBtn");
        const nav = document.querySelector('nav');

        window.onscroll = function() {
            if (adminSection.style.display === "flex") {
                scrollToTopBtn.classList.remove('visible');
            } else if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                scrollToTopBtn.classList.add('visible');
            } else {
                scrollToTopBtn.classList.remove('visible');
            }

            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        };

        scrollToTopBtn.addEventListener("click", () => {
            window.scrollTo({ top: 0, behavior: "smooth" });
        });

        document.querySelectorAll('#desktop-nav a:not(#adminLink)').forEach(link => {
            link.addEventListener('click', (e) => {
                if (adminSection.style.display === 'flex') {
                    e.preventDefault();
                    mainContent.style.display = 'block';
                    adminSection.style.display = 'none';
                    const targetId = link.getAttribute('href');
                    if (targetId && targetId.startsWith('#')) {
                        const targetElement = document.querySelector(targetId);
                        if (targetElement) {
                            targetElement.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                }
            });
        });

        // === Scroll-triggered animations via Animate.css ===
        const setupScrollAnimations = () => {
            const targets = document.querySelectorAll('[data-anim], .animated-item');
            const observer = new IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const el = entry.target;
                        const animName = el.dataset.anim || 'fadeInUp';
                        let delay = el.dataset.delay;
                        if (!delay) {
                            const delayCls = Array.from(el.classList).find(c => c.startsWith('delay-'));
                            if (delayCls) {
                                const num = parseInt(delayCls.split('-')[1]);
                                delay = (num * 0.1) + 's';
                            } else {
                                delay = '0s';
                            }
                        }
                        el.style.setProperty('--animate-delay', delay);
                        el.classList.add('animate__animated', `animate__${animName}`, 'is-visible');
                        obs.unobserve(el);
                    }
                });
            }, { threshold: 0.1 });
            targets.forEach(t => observer.observe(t));
        };
        
        const setupNavHighlighting = () => {
            const sections = document.querySelectorAll('section[data-section]');
            const navLinks = document.querySelectorAll('#desktop-nav a[data-nav-id]');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        navLinks.forEach(link => {
                            link.classList.toggle('active', link.dataset.navId === id);
                        });
                    }
                });
            }, { rootMargin: '-50% 0px -50% 0px', threshold: 0 });
            sections.forEach(section => observer.observe(section));
        };

        function closeMobileMenu() {
            mobileMenu.classList.remove('is-open');
            hamburgerBtn.classList.remove('is-active');
            hamburgerBtn.setAttribute('aria-expanded', 'false');
            document.body.classList.remove('menu-open');
        }

        hamburgerBtn.addEventListener('click', () => {
            const isOpen = mobileMenu.classList.toggle('is-open');
            hamburgerBtn.classList.toggle('is-active');
            hamburgerBtn.setAttribute('aria-expanded', isOpen);
            document.body.classList.toggle('menu-open');
        });

        mobileMenuLinks.forEach(link => {
            if (link.id !== 'adminLinkMobile') {
                link.addEventListener('click', () => {
                    closeMobileMenu();
                });
            }
        });

        passwordToggleIcon.addEventListener('mousedown', () => { adminPasswordInput.type = 'text'; });
        passwordToggleIcon.addEventListener('mouseup', () => { adminPasswordInput.type = 'password'; });
        passwordToggleIcon.addEventListener('mouseleave', () => { adminPasswordInput.type = 'password'; });
        passwordToggleIcon.addEventListener('touchstart', (e) => { e.preventDefault(); adminPasswordInput.type = 'text'; });
        passwordToggleIcon.addEventListener('touchend', () => { adminPasswordInput.type = 'password'; });

        const preloader = document.getElementById('preloader');
        initializeContent();
        loadSiteContent();
        setupScrollAnimations();
        setupNavHighlighting();

        window.addEventListener('load', () => {
            preloader.classList.add('loaded');
            document.body.classList.remove('loading');
        });

        function setupListSearch(searchInput, list) {
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                list.querySelectorAll('li').forEach(item => {
                    const text = item.querySelector('span').textContent.toLowerCase();
                    item.style.display = text.includes(searchTerm) ? '' : 'none';
                });
            });
        }

        // === Scroll progress bar update ===
        const scrollbar = document.getElementById('scrollbar');
        window.addEventListener('scroll', () => {
            const h = document.documentElement;
            const progress = (h.scrollTop)/(h.scrollHeight - h.clientHeight);
            scrollbar.style.width = (progress * 100) + '%';
        });

        // === Flash Save helper ===
        function flashSave(container){
            if(!container) return;
            container.classList.add('animate__animated','animate__flash');
            container.addEventListener('animationend',()=>{
                container.classList.remove('animate__animated','animate__flash');
            },{once:true});
        }

        // === Focus trap for custom modals ===
        let lastFocusedElement = null;
        function trapFocus(modal){
            const focusableSelectors = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
            const focusables = Array.from(modal.querySelectorAll(focusableSelectors));
            if(!focusables.length) return;
            const first = focusables[0];
            const last = focusables[focusables.length -1];
            lastFocusedElement = document.activeElement;
            function handleKey(e){
                if(e.key === 'Tab'){
                    if(e.shiftKey){
                        if(document.activeElement === first){ e.preventDefault(); last.focus(); }
                    } else {
                        if(document.activeElement === last){ e.preventDefault(); first.focus(); }
                    }
                } else if(e.key === 'Escape'){
                    modal.classList.remove('is-visible');
                    document.removeEventListener('keydown', handleKey);
                    if(lastFocusedElement) lastFocusedElement.focus();
                }
            }
            document.addEventListener('keydown', handleKey);
            first.focus();
        }

        // Dark toggle JS after DOMContentLoaded variable initializations maybe near variable declarations.
        const darkToggleBtn = document.getElementById('dark-toggle');
        const htmlEl = document.documentElement;
        function applyTheme(theme){
            if(theme === 'light'){
                htmlEl.classList.add('light-theme');
                darkToggleBtn.textContent = 'â˜€ï¸';
            } else {
                htmlEl.classList.remove('light-theme');
                darkToggleBtn.textContent = 'ğŸŒ™';
            }
        }
        const storedTheme = localStorage.getItem('theme') || 'dark';
        applyTheme(storedTheme);
        darkToggleBtn.addEventListener('click', () => {
            const newTheme = htmlEl.classList.contains('light-theme') ? 'dark' : 'light';
            localStorage.setItem('theme', newTheme);
            applyTheme(newTheme);
        });
    });
  </script>
</body>
</html>
